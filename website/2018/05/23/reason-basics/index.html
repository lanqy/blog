<!--
 * @Author: Leland
 * @Date: 2019-12-27 15:59:00
 * @Description: Description
 -->
<!doctype html>
<html>

  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui" />
    <title>Reason 基础知识</title>
    <link href="/css/style.css" rel="stylesheet" />
    <meta name="description" content="Reason 基础知识">
  </head>

  <body>
    <div>
      <div>
        <header class="header">
          <div class="container header-wrap">
            <h1 class="site-name">
              <a href="/">
                首页
              </a>
            </h1>
            <ul class="nav">
              <li class="nav-item">
                <a href="/about">关于</a>
              </li>
            </ul>
          </div>
        </header>
      </div>
      <div class="container main">
        <div class="page-body">
          <div class="markdown-body">
            <h1>Reason 基础知识</h1>
            <p>译自： <a href="https://github.com/parkerziegler/reason-basics">https://github.com/parkerziegler/reason-basics</a></p>
            <blockquote>
              <p>人们学习 Reason 编程语言的存储库。</p>
            </blockquote>
            <h2>目的</h2>
            <p>此存储库是 Reason 社区的新手通过简单示例了解该语言的基础知识的地方。你在这里看到的大部分内容都是从<a href="https://reasonml.github.io/docs/en/overview.html">文档</a>中压缩或修改的。文档是一个很好的资源，并为语言背后的设计决策提供了高层次的解释。但是，对于初次使用程序员和首次使用 Reason 的用户来说，他们会感到有点压倒性。这个存储库希望能够简化一些语言，并提供非常清晰，简洁的例子来帮助你了解和使用 Reason。如果您发现任何令人困惑，过于复杂或错误的事情，请<a href="https://github.com/parkerziegler/reason-basics/issues">提交问题</a>或<a href="https://github.com/parkerziegler/reason-basics/pulls">创建拉取请求</a>。</p>
            <h2>安装</h2>
            <p>遵循相同的标准步骤克隆和本地安装此存储库：</p>
            <pre><code class="language-ocaml">git clone https<span class="token punctuation">:</span><span class="token operator">//</span>github<span class="token punctuation">.</span>com<span class="token operator">/</span>parkerziegler<span class="token operator">/</span>reason<span class="token operator">-</span>basics<span class="token punctuation">.</span>git
cd reason<span class="token operator">-</span>basics
yarn install
</code></pre>
            <h2>运行代码</h2>
            <p>该存储库的源文件当前位于 src/index.re 中。要将 Reason 代码编译为 BuckleScript，然后编译为 JS：</p>
            <pre><code class="language-ocaml">yarn run build
</code></pre>
            <p>编译该文件并在保存时监视更改：</p>
            <pre><code class="language-ocaml">yarn run start
</code></pre>
            <p>运行代码并查看终端中的输出：</p>
            <pre><code class="language-ocaml">node src<span class="token operator">/</span>index<span class="token punctuation">.</span>bs<span class="token punctuation">.</span>js
</code></pre>
            <p>这期望您的计算机上安装了Node @ 6或更高版本。</p>
            <h2>编辑器</h2>
            <p>如果使用 vscode，则可以使用 <code>Cmd + Shift + B</code>（在 macOS 上）或 <code>Windows + Shift + B</code>（在 Windows 上）自动构建。</p>
            <h2>扩展</h2>
            <p>如果您使用 vscode，我建议安装 <a href="https://marketplace.visualstudio.com/items?itemName=freebroccolo.reasonml">OCaml 和 Reason IDE</a> 以获得令人敬畏的 Reason 编码体验。</p>
            <h2>让我们学习 Reason</h2>
            <blockquote>
              <p>注意：这些内容与index.re中的内容相同，只是为了您的欣赏而写在 Markdown 中。</p>
            </blockquote>
            <p>请注意，此存储库使用 Reason 的 v3 语法。</p>
            <pre><code class="language-ocaml"><span class="token operator">/*</span> 这里是 Reason 中的注释<span class="token punctuation">.</span> <span class="token operator">*/</span>
</code></pre>
            <p>要在控制台打印，我们可以使用 BuckleScript 的 JS 模块。</p>
            <pre><code class="language-ocaml">Js<span class="token punctuation">.</span>log<span class="token punctuation">(</span><span class="token string">"Hello, BuckleScript and Reason! Luv BuckleScript"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <p>我们也可以使用 Reason 的原生 print_* 模块。</p>
            <pre><code class="language-ocaml">print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span><span class="token string">"Hello, BuckleScript and Reason! Luv Reason"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <p>请注意，print_endline 只能打印字符串。要打印数据结构，请使用 Js.log 。未来在语言上对此的支持即将到来。</p>
            <p>要打印其他类型，您可以使用 Reason 的类型强制方法或 print_* 模块。</p>
            <pre><code class="language-ocaml">print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>string<span class="token punctuation">_</span>of<span class="token punctuation">_</span>int<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>string<span class="token punctuation">_</span>of<span class="token punctuation">_</span>bool<span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <p>如果使用 print_* 方法，则需要使用 print_newline() 来获取新行。 print_endline() 为你添加新行。</p>
            <pre><code class="language-ocaml">print<span class="token punctuation">_</span>int<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
print<span class="token punctuation">_</span>newline<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
print<span class="token punctuation">_</span>float<span class="token punctuation">(</span><span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
print<span class="token punctuation">_</span>newline<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <h3>变量</h3>
            <p>Reason 中的变量使用 let 定义。 没有 JS 中 const 的概念。</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> myVar <span class="token operator">=</span> <span class="token string">"myVar"</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> myInt <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre>
            <h3>字符和字符串</h3>
            <p>Reason 区分字符( 用单引号 )和字符串( 用双引号 )。</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token string">'x'</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> y <span class="token operator">=</span> <span class="token string">'y'</span><span class="token punctuation">;</span>
</code></pre>
            <p>模式匹配字符的示例。</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> isXY <span class="token operator">=</span> char<span class="token punctuation">:</span> bool <span class="token operator">=></span>
  switch <span class="token punctuation">(</span>char<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">|</span> <span class="token string">'x'</span>
    <span class="token operator">|</span> <span class="token string">'y'</span><span class="token operator">=></span> <span class="token boolean">true</span>
    <span class="token operator">|</span> <span class="token punctuation">_</span> <span class="token operator">=></span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
            <p>要将字符转换为字符串，请使用 String.make，将 1 作为第一个参数传递。</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> stringFromChar<span class="token punctuation">:</span> string <span class="token operator">=</span> String<span class="token punctuation">.</span>make<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span> <span class="token operator">++</span> String<span class="token punctuation">.</span>make<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>stringFromChar<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <p>字符串使用 ++ 运算符连接。</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> greeting <span class="token operator">=</span> <span class="token string">"Hello"</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> space <span class="token operator">=</span> <span class="token string">" "</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token string">"P-Doo"</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> exclamation <span class="token operator">=</span> <span class="token string">"!"</span><span class="token punctuation">;</span>

print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>greeting <span class="token operator">++</span> space <span class="token operator">++</span> name <span class="token operator">++</span> exclamation<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <p>我们可以使用标准库中的 String 方法（ Reason 的内置方法）对字符串进行操作。</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> whitespaceString <span class="token operator">=</span> <span class="token string">"  _trim me_  "</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> trimmedString <span class="token operator">=</span> String<span class="token punctuation">.</span>trim<span class="token punctuation">(</span>whitespaceString<span class="token punctuation">)</span><span class="token punctuation">;</span>

print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>trimedString<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> atString <span class="token operator">=</span>
  String<span class="token punctuation">.</span>map<span class="token punctuation">(</span>
    c <span class="token operator">=></span>
      switch <span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token operator">|</span><span class="token string">' '</span> <span class="token operator">=></span> <span class="token string">'@'</span>
        <span class="token operator">|</span> <span class="token punctuation">_</span> <span class="token operator">=></span> c
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      whitespaceString
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>atString<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <p>字符串中的特殊字符需要使用 <code>\</code> 转义。</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> slash <span class="token operator">=</span> <span class="token string">"\\"</span><span class="token punctuation">;</span>
print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>slash<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <p>原因还支持多行字符串，类似于 JS 模板文字。他们使用 <code>{|</code> 和 <code>|}</code> 分隔。</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> multilineString <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">|</span>Hello
Reasonable
Folks<span class="token operator">!|</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>multilineString<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <p>字符串方法在多行字符串上工作相同。例如，要将多行字符串转换为单行字符串：</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> singlelineString <span class="token operator">=</span>
  String<span class="token punctuation">.</span>map<span class="token punctuation">(</span>
    c <span class="token operator">=></span>
      swith <span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token operator">|</span> <span class="token string">'\n'</span> <span class="token operator">=></span> <span class="token string">' '</span>
        <span class="token operator">|</span> <span class="token punctuation">_</span> <span class="token operator">=></span> c
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      multilineString
    <span class="token punctuation">)</span><span class="token punctuation">;</span>

print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>singlelineString<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <p>要在多行字符串中插入变量，请用 <code>j| 和</code>|j` 包围字符串。</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> style <span class="token operator">=</span> <span class="token string">"background-color: papayawhip"</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> cssStyle <span class="token operator">=</span> <span class="token punctuation">{</span>j<span class="token operator">|$</span>style<span class="token operator">|</span>j<span class="token punctuation">}</span><span class="token punctuation">;</span>

print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>cssStyle<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <p>要在 Reason 中的字符串中使用 unicode 字符，请使用 <code>js| |js</code> （译者注：或者 <code>j| |j</code>）。</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> unicodeString <span class="token operator">=</span> <span class="token punctuation">{</span>js<span class="token operator">|</span>••∆∆••<span class="token operator">|</span>js<span class="token punctuation">}</span><span class="token punctuation">;</span>

print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>unicodeString<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <p>获取字符串长度和截取字符串：</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> background <span class="token operator">=</span> <span class="token string">"background-color: aquamarine"</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> strLength<span class="token punctuation">:</span> int <span class="token operator">=</span> String<span class="token punctuation">.</span>length<span class="token punctuation">(</span>background<span class="token punctuation">)</span><span class="token punctuation">;</span>

print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>string<span class="token punctuation">_</span>of<span class="token punctuation">_</span>int<span class="token punctuation">(</span>strLength<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> subStr<span class="token punctuation">:</span> string <span class="token operator">=</span>
  String<span class="token punctuation">.</span>sub<span class="token punctuation">(</span>background<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> String<span class="token punctuation">.</span>index<span class="token punctuation">(</span>background<span class="token punctuation">,</span> <span class="token string">'-'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>subStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <h3>条件语句</h3>
            <p>条件语句的工作原理与 JS 类似。然而，如果没有 <code>else</code> 的 <code>if</code> 语句，则将其计算为 <code>else{()}</code>，即 <code>unit</code> 类型。</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> displayGreeting <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>displayGreeting<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> message <span class="token operator">=</span> <span class="token string">"Enjoying my ridiculous commentary yet?"</span><span class="token punctuation">;</span>
  print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
            <p>条件是对其正文内容进行评估的——不需要返回语句。</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> good <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> content <span class="token operator">=</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>good<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token string">"This tweet is good."</span><span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token string">"This tweet is bad. please make it better."</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <p>在上面的块中，必须有一个 <code>else</code> 分支对字符串进行评估。如果没有，内容将被分配到 <code>unit</code> 类型，尽管它的目的是作为一个字符串。这会产生编译器错误。还有对三元运算符的支持。</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> retweet <span class="token operator">=</span> good <span class="token operator">?</span> <span class="token string">"Most certainly."</span> <span class="token punctuation">:</span> <span class="token string">"Eh, don't think so."</span><span class="token punctuation">;</span>
print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>retweet<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <h3>作用域</h3>
            <p>变量默认为块作用域。让绑定可以使用 <code>{}</code> 创建匿名作用域。</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> anonymousScope <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token string">"Parker"</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> company <span class="token operator">=</span> <span class="token string">"Formidable"</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> place <span class="token operator">=</span> <span class="token string">"Seattle"</span><span class="token punctuation">;</span>
  print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span><span class="token punctuation">{</span>j<span class="token operator">|$</span>name works at <span class="token operator">$</span>company <span class="token keyword">in</span> <span class="token operator">$</span>place<span class="token punctuation">.</span><span class="token operator">|</span>j<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
            <p><code>nam</code> ， <code>company</code> 和 <code>place</code> 在这里是无法访问的，因为它们是由上面创建的匿名范围持有的。试图在范围之外访问它们会导致错误！</p>
            <h3>类型！</h3>
            <p>Reason 由 OCaml 顶尖的系统支持。我们可以明确地输入变量，虽然这不是必需的。Reason 往往会为我们推断类型。</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> petalLength<span class="token punctuation">:</span> int <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
</code></pre>
            <p>我们也可以使用别名类型。</p>
            <pre><code class="language-ocaml"><span class="token keyword">type</span> sepalLength <span class="token operator">=</span> int<span class="token punctuation">;</span>
</code></pre>
            <p>然后使用它们！</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> sepalLength<span class="token punctuation">:</span> sepalLength <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
</code></pre>
            <p>我们通过注解参数来输入函数返回值。</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> flowerLength <span class="token operator">=</span> <span class="token punctuation">(</span>petal<span class="token punctuation">:</span> int<span class="token punctuation">,</span> sepal<span class="token punctuation">:</span> sepalLength<span class="token punctuation">)</span><span class="token punctuation">:</span> int <span class="token operator">=></span> petal <span class="token operator">+</span> sepal<span class="token punctuation">;</span>
print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>string<span class="token punctuation">_</span>of<span class="token punctuation">_</span>in<span class="token punctuation">(</span>flowerLength<span class="token punctuation">(</span>petalLength<span class="token punctuation">,</span> sepalLength<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <h3>布尔</h3>
            <p>Reason 中的布尔比较类似于 JS 。 <code>===</code> 表示引用相等，而 <code>==</code> 表示结构相等。小心使用 <code>==</code>，Reason 会提醒你这个！</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> myTuple <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">"Parkie"</span><span class="token punctuation">,</span> <span class="token string">"is"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> compareBool <span class="token operator">=</span> tuple<span class="token punctuation">:</span> bool <span class="token operator">=></span> tuple <span class="token operator">===</span> myTuple<span class="token punctuation">;</span>

print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>string<span class="token punctuation">_</span>of<span class="token punctuation">_</span>bool<span class="token punctuation">(</span>compareBool<span class="token punctuation">(</span>myTuple<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <p>这条线会产生多态比较（可能不安全）。</p>
            <pre><code class="language-ocaml">print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>string<span class="token punctuation">_</span>of<span class="token punctuation">_</span>bool<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">'M'</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token punctuation">(</span><span class="token string">'M'</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <p>该行不会产生警告。</p>
            <pre><code class="language-ocaml">print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>string<span class="token punctuation">_</span>of<span class="token punctuation">_</span>bool<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">'M'</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token punctuation">(</span><span class="token string">'M'</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <h3>整数和浮点数</h3>
            <p>Reason 有整数和浮点数的概念，而不仅仅是 JS 数字。</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> githubStars<span class="token punctuation">:</span> int <span class="token operator">=</span> <span class="token number">9</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> squareInt <span class="token operator">=</span> <span class="token punctuation">(</span>num<span class="token punctuation">:</span> int<span class="token punctuation">)</span><span class="token punctuation">:</span> int <span class="token operator">=></span> num <span class="token operator">*</span> num<span class="token punctuation">;</span>

print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>string<span class="token punctuation">_</span>of<span class="token punctuation">_</span>int<span class="token punctuation">(</span>squareInt<span class="token punctuation">(</span>githubStars<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <p>要使用整数，请使用 Reason’s Pervasives 模块中的方法。这些已经在范围内。</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> start<span class="token punctuation">:</span> int <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token operator">+</span> start<span class="token punctuation">;</span> <span class="token operator">/*</span> 一元添加 <span class="token operator">*/</span>
<span class="token operator">-</span> start<span class="token punctuation">;</span> <span class="token operator">/*</span> 一元相减 <span class="token operator">*/</span>
<span class="token keyword">let</span> remainder <span class="token operator">=</span> <span class="token number">20</span> <span class="token operator">mod</span> <span class="token number">5</span><span class="token punctuation">;</span>

print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>string<span class="token punctuation">_</span>of<span class="token punctuation">_</span>int<span class="token punctuation">(</span>remainder<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <p>浮点数具有唯一的操作数语法，附加 . 到 <code>+, -, *, /</code> 操作符上。</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> pi<span class="token punctuation">:</span> float <span class="token operator">=</span> <span class="token number">3.1415926</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> circleArea <span class="token operator">=</span> <span class="token punctuation">(</span>radius<span class="token punctuation">:</span> float<span class="token punctuation">)</span><span class="token punctuation">:</span> float <span class="token operator">=></span> pi <span class="token operator">*.</span> radius <span class="token operator">*.</span> radius<span class="token punctuation">;</span>

print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>string<span class="token punctuation">_</span>of<span class="token punctuation">_</span>float<span class="token punctuation">(</span>circleArea<span class="token punctuation">(</span><span class="token number">20.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> radius <span class="token operator">=</span> sqrt<span class="token punctuation">(</span>circleArea<span class="token punctuation">(</span><span class="token number">20.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/.</span> pi<span class="token punctuation">;</span>

print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>string<span class="token punctuation">_</span>of<span class="token punctuation">_</span>float<span class="token punctuation">(</span>radius<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre>
            <h3>元组</h3>
            <p>元组在创建时是不可变的、有序的、有限的，并且是异构类型的(尽管它们可以是相同类型的)。Tuple 类型只是模仿它们所代表的元组的形状!</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> myTuple<span class="token punctuation">:</span> <span class="token punctuation">(</span>char<span class="token punctuation">,</span> string<span class="token punctuation">,</span> int<span class="token punctuation">,</span> string<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token string">"wonderful"</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token string">"tuple"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <p>有一些特殊的方法可以获得长度为 2 的元组的元素元素。这些元素可以在 Pervasives 模块中使用。</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> twoTuple<span class="token punctuation">:</span> <span class="token punctuation">(</span>string<span class="token punctuation">,</span> string<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">"It"</span><span class="token punctuation">,</span> <span class="token string">"Me"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> first<span class="token punctuation">:</span> string <span class="token operator">=</span> fst<span class="token punctuation">(</span>twoTuple<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> second<span class="token punctuation">:</span> string <span class="token operator">=</span> snd<span class="token punctuation">(</span>twoTuple<span class="token punctuation">)</span><span class="token punctuation">;</span>

print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>first<span class="token punctuation">)</span><span class="token punctuation">;</span>
print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>second<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <p>大多数元组元素都是使用解构来访问的。</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> <span class="token punctuation">(</span><span class="token punctuation">_</span><span class="token punctuation">,</span> <span class="token punctuation">_</span><span class="token punctuation">,</span> third<span class="token punctuation">:</span> int<span class="token punctuation">,</span> <span class="token punctuation">_</span><span class="token punctuation">)</span> <span class="token operator">=</span> myTuple<span class="token punctuation">;</span>
print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>string<span class="token punctuation">_</span>of<span class="token punctuation">_</span>int<span class="token punctuation">(</span>third<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <p>元组对于模式匹配多个参数特别有用。</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> rotate <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token operator">=></span>
  switch <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">|</span> <span class="token punctuation">(</span><span class="token number">180</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">180</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">=></span> print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span><span class="token punctuation">{</span>j<span class="token operator">|</span>Rotate <span class="token operator">$</span>x<span class="token punctuation">,</span> <span class="token operator">$</span>y<span class="token operator">|</span>j<span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token operator">|</span> <span class="token punctuation">(</span><span class="token number">90</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">=></span> print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span><span class="token punctuation">{</span>j<span class="token operator">|</span>Turn <span class="token operator">$</span>x<span class="token punctuation">,</span> <span class="token operator">$</span>y<span class="token operator">|</span>j<span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token operator">|</span> <span class="token punctuation">(</span><span class="token punctuation">_</span><span class="token punctuation">,</span> <span class="token punctuation">_</span><span class="token punctuation">)</span> <span class="token operator">=></span> print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span><span class="token string">"Hold steady!"</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

rotate<span class="token punctuation">(</span><span class="token number">180</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">180</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
rotate<span class="token punctuation">(</span><span class="token number">90</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
rotate<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">70</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <h3>记录</h3>
            <p>记录类似于 JS 对象，但更轻，默认情况下不可变，固定在字段名称和类型中，速度更快，键入更严格。记录类型是必需的 - 如果不写类型，编译器会报错！请务必使用 mutable 关键字预先设置可变属性。</p>
            <pre><code class="language-ocaml"><span class="token keyword">type</span> team <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> string<span class="token punctuation">,</span>
  <span class="token keyword">mutable</span> rank<span class="token punctuation">:</span> int<span class="token punctuation">,</span>
  average<span class="token punctuation">:</span> float<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> redSox<span class="token punctuation">:</span> team <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">"Red Sox"</span><span class="token punctuation">,</span>
  rank<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  average<span class="token punctuation">:</span> <span class="token number">0.326</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre>
            <p>记录的 <code>keys</code> 通过点符号访问。</p>
            <pre><code class="language-ocaml">print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>redSox<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>string<span class="token punctuation">_</span>of<span class="token punctuation">_</span>float<span class="token punctuation">(</span>redSox<span class="token punctuation">.</span>average<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <p>使用扩展操作符可以从旧记录中创建新的记录。但是，扩展不能添加新字段，因为记录受到类型限制。</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> redSoxUpdate <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>redSox<span class="token punctuation">,</span> average<span class="token punctuation">:</span> <span class="token number">0.418</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>string<span class="token punctuation">_</span>of<span class="token punctuation">_</span>float<span class="token punctuation">(</span>redSoxUpdate<span class="token punctuation">.</span>average<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <p>现有的记录可以使用 <code>=</code> 更新可变字段。</p>
            <pre><code class="language-ocaml">redSox<span class="token punctuation">.</span>rank <span class="token operator">=</span> redSox<span class="token punctuation">.</span>rank <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>string<span class="token punctuation">_</span>of<span class="token punctuation">_</span>int<span class="token punctuation">(</span>redSox<span class="token punctuation">.</span>rank<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <p>在 Reason 中记录也有双关语，类似于ES6对象简写语法。如果值和键匹配，这允许您只提供关键名称。</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> capital <span class="token operator">=</span> <span class="token string">"Olympia"</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> population <span class="token operator">=</span> <span class="token number">6000000</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> state <span class="token operator">=</span> <span class="token punctuation">{</span>
  capital<span class="token punctuation">:</span> string<span class="token punctuation">,</span>
  population<span class="token punctuation">:</span> int<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> washington<span class="token punctuation">:</span> state <span class="token operator">=</span> <span class="token punctuation">{</span>
  capital<span class="token punctuation">,</span>
  population
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
            <p>你也可以用类型双关！</p>
            <pre><code class="language-ocaml"><span class="token keyword">type</span> place <span class="token operator">=</span> <span class="token punctuation">{</span>
  state<span class="token punctuation">,</span>
  team<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> seattle<span class="token punctuation">:</span> place <span class="token operator">=</span> <span class="token punctuation">{</span>
  state<span class="token punctuation">:</span> washington<span class="token punctuation">,</span>
  team<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">"Mariners"</span><span class="token punctuation">,</span>
    rank<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
    average<span class="token punctuation">:</span> <span class="token number">0.298</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
            <p>尽管记录与 JS 对象有些类似，但您必须更加认识它们的类型。将数据记录用于不改变形状的数据。记录被编译为具有数组索引访问权限的 JS 数组，使其快速。更改记录的类型还可以帮助标记需要更新数据结构的位置，从而使调试变得更加简单！</p>
            <p>如果你对使用 JS 本地对象感兴趣，Reason 提供了一个简写语法。这涉及用双引号（<code>&quot;&quot;</code>）来包装 <code>key</code> 名称。</p>
            <pre><code class="language-ocaml"><span class="token keyword">type</span> jsObject <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">.</span>
  <span class="token string">"response"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">.</span>
    <span class="token string">"data"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">.</span>
      <span class="token string">"starCount"</span><span class="token punctuation">:</span> int<span class="token punctuation">,</span>
      <span class="token string">"watchers"</span><span class="token punctuation">:</span> int
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">"code"</span><span class="token punctuation">:</span> int
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> jsObject<span class="token punctuation">:</span>jsObject <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string">"response"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">"data"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">"starCount"</span><span class="token punctuation">:</span> <span class="token number">9</span><span class="token punctuation">,</span>
      <span class="token string">"watchers"</span><span class="token punctuation">:</span> <span class="token number">2</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">"code"</span><span class="token punctuation">:</span> <span class="token number">200</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
            <p>要访问字段，请使用 <code>##</code> 符号。</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> starCount<span class="token punctuation">:</span> int <span class="token operator">=</span> jsObject#<span class="token directive function">#reponse</span>#<span class="token directive function">#data</span>#<span class="token directive function">#starCount</span><span class="token punctuation">;</span>
print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>string<span class="token punctuation">_</span>of<span class="token punctuation">_</span>int<span class="token punctuation">(</span>starCount<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <h3>变种</h3>
            <p>变体是 Reason 中唯一的数据结构。他们让我们表达这种或那种关系。</p>
            <pre><code class="language-ocaml"><span class="token keyword">type</span> tweetQuality <span class="token operator">=</span>
  <span class="token operator">|</span> Dope <span class="token operator">/*</span> 这些被称为变体的构造函数或标签。 <span class="token operator">*/</span>
  <span class="token operator">|</span> Sweet
  <span class="token operator">|</span> NotBad
  <span class="token operator">|</span> AF
</code></pre>
            <p>变体通常与 Reason 的 switch 语句一起用于模式匹配。</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> tweetStatus <span class="token operator">=</span> status<span class="token punctuation">:</span> string <span class="token operator">=></span>
  switch <span class="token punctuation">(</span>status<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">|</span> Dope <span class="token operator">=></span> <span class="token string">"That was a dope tweet!"</span>
    <span class="token operator">|</span> Sweet <span class="token operator">=></span> <span class="token string">"Pretty sweet tweet!"</span>
    <span class="token operator">|</span> NotBad <span class="token operator">=></span> <span class="token string">"Not great, but not bad!"</span>
    <span class="token operator">|</span> AF <span class="token operator">=></span> <span class="token string">"Pretty af tweet my friend!"</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>tweetStatus<span class="token punctuation">(</span>AF<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <p>变体需要明确的定义。通过调用它们所在的模块来导入它们。</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> team<span class="token punctuation">:</span> Team<span class="token punctuation">.</span>seattleVariant <span class="token operator">=</span> Mariners<span class="token punctuation">;</span>
</code></pre>
            <p>变体构造函数也可以带参数。查看 <a href="http://Team.re">Team.re</a> 中的 seattleVariant，它具有以下形状：</p>
            <pre><code class="language-ocaml"><span class="token keyword">type</span> seattleVariant <span class="token operator">=</span>
  <span class="token operator">|</span> Mariners<span class="token punctuation">(</span>player<span class="token punctuation">)</span>
  <span class="token operator">|</span> Sonics<span class="token punctuation">(</span>player<span class="token punctuation">,</span> year<span class="token punctuation">)</span>
  <span class="token operator">|</span> Seahawks
  <span class="token operator">|</span> Sounders<span class="token punctuation">;</span>
</code></pre>
            <p>这看起来很像函数参数！我们可以在模式匹配中使用这个优势！</p>
            <pre><code class="language-ocaml"><span class="token keyword">open</span> Team<span class="token punctuation">;</span>
<span class="token keyword">let</span> player<span class="token punctuation">:</span> Team<span class="token punctuation">.</span>bostonVariant <span class="token operator">=</span> RedSox<span class="token punctuation">(</span><span class="token string">"Mookie Betts"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> namePlayer <span class="token operator">=</span> arg <span class="token operator">=></span>
  switch <span class="token punctuation">(</span>arg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">|</span> RedSox<span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>j<span class="token operator">|</span>You chose <span class="token operator">$</span>name<span class="token operator">|</span>j<span class="token punctuation">}</span>
    <span class="token operator">|</span> Celtics<span class="token punctuation">(</span>name<span class="token punctuation">,</span> year<span class="token punctuation">)</span> <span class="token operator">=></span> year <span class="token operator">&lt;</span> <span class="token number">2008</span> <span class="token operator">?</span> name <span class="token punctuation">:</span> <span class="token string">"Big 3"</span>
    <span class="token operator">|</span> Patriots <span class="token operator">=></span> <span class="token string">"Malcolm Butler"</span>
    <span class="token operator">|</span> Bruins <span class="token operator">=></span> <span class="token string">"Zdeno Chara"</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>namePlayer<span class="token punctuation">(</span>player<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>namePlayer<span class="token punctuation">(</span>Celtics<span class="token punctuation">(</span><span class="token string">"Larry Bird"</span><span class="token punctuation">,</span> <span class="token number">2009</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>namePlayer<span class="token punctuation">(</span>Celtics<span class="token punctuation">(</span><span class="token string">"Larry Bird"</span><span class="token punctuation">,</span><span class="token number">1984</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
            <p>独立库为您提供了一些很酷的变体。<code>type option('a) = None | Some('a)</code>;- 这允许你定义可以为 <code>null</code> 或者 <code>undefined</code> 的类型。例如，<code>option(int)</code> 键入一个变量作为可为空的整数。</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> isNull <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> possiblyNullInt<span class="token punctuation">:</span> option<span class="token punctuation">(</span>int<span class="token punctuation">)</span> <span class="token operator">=</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>isNull<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    None
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    Some<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> checkNull <span class="token operator">=</span> <span class="token punctuation">(</span>num<span class="token punctuation">:</span> option<span class="token punctuation">(</span>int<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  switch <span class="token punctuation">(</span>num<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">|</span> Some<span class="token punctuation">(</span>int<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token boolean">false</span>
    <span class="token operator">|</span> None <span class="token operator">=></span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>string<span class="token punctuation">_</span>of<span class="token punctuation">_</span>bool<span class="token punctuation">(</span>checkNull<span class="token punctuation">(</span>possiblyNullInt<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
            <h3>列表和数组</h3>
            <p>列表是同类型的，不可变的，并且在预添加项目时很快。列表看起来很像 JS 中的数组。</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> fibList<span class="token punctuation">:</span> list<span class="token punctuation">(</span>int<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre>
            <p>要添加到列表中，请使用延展运算符。这不会改变原始列表。相反，新列表维护一个链接到扩展列表。例如，下面的 fibListHeadZero 与 fibList 共享其元素，使其非常高效。</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> fibListHeadZero <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>fibList<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre>
            <p>需要注意的是，在 Reason 中不允许使用双延展操作符，即不允许类似这样 [a,…b,…c] 。要访问任意列表项，请使用 List 模块中的 List.nth。</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> five <span class="token operator">=</span> List<span class="token punctuation">.</span>nth<span class="token punctuation">(</span>fibList<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>string<span class="token punctuation">_</span>of<span class="token punctuation">_</span>int<span class="token punctuation">(</span>five<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <p>要获得列表的长度，使用List.length。</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> length<span class="token punctuation">:</span> int <span class="token operator">=</span> List<span class="token punctuation">.</span>length<span class="token punctuation">(</span>fibList<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> lastItem<span class="token punctuation">:</span> int <span class="token operator">=</span> List<span class="token punctuation">.</span>nth<span class="token punctuation">(</span>fibList<span class="token punctuation">,</span> length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <p>List 模块 附带有用于在列表上操作的附加内置方法。</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> reverse <span class="token operator">=</span> List<span class="token punctuation">.</span>rev<span class="token punctuation">(</span>fibList<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> sum <span class="token operator">=</span> List<span class="token punctuation">.</span>fold<span class="token punctuation">_</span>left<span class="token punctuation">(</span><span class="token punctuation">(</span>acc<span class="token punctuation">,</span> el<span class="token punctuation">)</span> <span class="token operator">=></span> acc <span class="token operator">+</span> el<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> fibList<span class="token punctuation">)</span><span class="token punctuation">;</span>
print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>string<span class="token punctuation">_</span>of<span class="token punctuation">_</span>int<span class="token punctuation">(</span>sum<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> thriteen <span class="token operator">=</span> List<span class="token punctuation">.</span>find<span class="token punctuation">(</span>item <span class="token operator">=></span> item <span class="token operator">===</span> <span class="token number">13</span><span class="token punctuation">,</span> fibList<span class="token punctuation">)</span><span class="token punctuation">;</span>
print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>string<span class="token punctuation">_</span>of<span class="token punctuation">_</span>int<span class="token punctuation">(</span>thirteen<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> aboveTen <span class="token operator">=</span> List<span class="token punctuation">.</span>filter<span class="token punctuation">(</span>item <span class="token operator">=></span> item <span class="token operator">></span> <span class="token number">10</span><span class="token punctuation">,</span> fibList<span class="token punctuation">)</span><span class="token punctuation">;</span>

List<span class="token punctuation">.</span>iter<span class="token punctuation">(</span>item <span class="token operator">=></span> print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>string<span class="token punctuation">_</span>of<span class="token punctuation">_</span>int<span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> aboveTen<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <p>数组就像列表，但是对于随机访问和更新是可变的和优化的。它们的大小是固定的，但在 JS 上是灵活的。数组的两端都用 <code>[|</code> 和 <code>|]</code> 表示。</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> fibArray<span class="token punctuation">:</span> array<span class="token punctuation">(</span>int<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">|</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">21</span><span class="token operator">|</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre>
            <p>数组访问和更新类似于 JS。</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> length<span class="token punctuation">:</span> int <span class="token operator">=</span> Array<span class="token punctuation">.</span>length<span class="token punctuation">(</span>fibArray<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> lastItem<span class="token punctuation">:</span> int <span class="token operator">=</span> fibArray<span class="token punctuation">[</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span>
fibArray<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">500</span><span class="token punctuation">;</span>
</code></pre>
            <p>您也可以使用标准库中的 <code>Array.get</code> 和 <code>Array.set</code>。</p>
            <pre><code class="language-ocaml">fibArray<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span>
print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>string<span class="token punctuation">_</span>of<span class="token punctuation">_</span>int<span class="token punctuation">(</span>fibArray<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <p>要将数组转换为列表，请在 ArrayLabels 模块中使用 <code>.to_list</code> 函数。</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> fibArrayAsList<span class="token punctuation">:</span> list<span class="token punctuation">(</span>int<span class="token punctuation">)</span> <span class="token operator">=</span> ArrayLabels<span class="token punctuation">.</span>to<span class="token punctuation">_</span>list<span class="token punctuation">(</span>fibArray<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> fibListAsArray<span class="token punctuation">:</span> Array<span class="token punctuation">(</span>int<span class="token punctuation">)</span> <span class="token operator">=</span> ArrayLabels<span class="token punctuation">.</span>of<span class="token punctuation">_</span>list<span class="token punctuation">(</span>fibArrayAsList<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <p>Reason 还支持多维数组。前两个参数指定数组的维数，而第三个参数提供填充数组的初始值。</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> multiDemArray <span class="token operator">=</span> Array<span class="token punctuation">.</span>make<span class="token punctuation">_</span>matrix<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">"Initial."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Js<span class="token punctuation">.</span>log<span class="token punctuation">(</span>multiDemArray<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <h3>函数</h3>
            <p>函数使用 =&gt; 声明。单行函数是允许的。多行函数应该被 <code>{}</code> 包围。在理由中，所有函数都有参数。如果没有显式参数传递，我们传递 <code>()</code>，unit 类型。</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> noArg <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> unit <span class="token operator">=></span> print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span><span class="token string">"This is unit!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> add <span class="token operator">=</span> x <span class="token operator">=></span> x <span class="token operator">+</span> x<span class="token punctuation">;</span>
<span class="token keyword">let</span> square <span class="token operator">=</span> x <span class="token operator">=></span> x <span class="token operator">*</span> x<span class="token punctuation">;</span>
</code></pre>
            <p>管道操作符的预览！</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> addAndSquare <span class="token operator">=</span> x <span class="token operator">=></span> x <span class="token operator">|></span> add <span class="token operator">|></span> square<span class="token punctuation">;</span>

print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>string<span class="token punctuation">_</span>of<span class="token punctuation">_</span>int<span class="token punctuation">(</span>addAndSquare<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <p>Reason 也有标签参数的概念。由于 Reason 支持 currying（柯里化），因此我们可以使用带标签的参数以任意顺序指定参数。</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> concatStringInt <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">~</span>int<span class="token punctuation">:</span> int<span class="token punctuation">,</span> <span class="token operator">~</span>str<span class="token punctuation">:</span> string<span class="token punctuation">)</span> <span class="token operator">=></span>
  string<span class="token punctuation">_</span>of<span class="token punctuation">_</span>int<span class="token punctuation">(</span>int<span class="token punctuation">)</span> <span class="token operator">++</span> <span class="token string">" "</span> <span class="token operator">++</span> str<span class="token punctuation">;</span>

print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>concatStringInt<span class="token punctuation">(</span><span class="token operator">~</span>str<span class="token operator">=</span><span class="token string">"is an int."</span><span class="token punctuation">,</span> <span class="token operator">~</span>int<span class="token operator">=</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <p>您也可以使用标签参数来在函数中使用。</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> calcTriangleArea <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">~</span>base <span class="token keyword">as</span> b<span class="token punctuation">:</span> float<span class="token punctuation">,</span> <span class="token operator">~</span>height <span class="token keyword">as</span> h<span class="token punctuation">:</span> float<span class="token punctuation">)</span><span class="token punctuation">:</span> float <span class="token operator">=></span> <span class="token number">0.5</span> <span class="token operator">*.</span> b <span class="token operator">*.</span> h<span class="token punctuation">;</span>
print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>string<span class="token punctuation">_</span>of<span class="token punctuation">_</span>float<span class="token punctuation">(</span>calcTriangleArea<span class="token punctuation">(</span><span class="token operator">~</span>base<span class="token operator">=</span><span class="token number">2.0</span><span class="token punctuation">,</span> <span class="token operator">~</span>height<span class="token operator">=</span><span class="token number">7.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <h3>柯里</h3>
            <p>Reason 函数可以自动部分调用。事实上，Reason 中的所有函数都接受一个参数！</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> multiply <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token operator">=></span> x <span class="token operator">*</span> y<span class="token punctuation">;</span>
<span class="token keyword">let</span> multiplyByFive <span class="token operator">=</span> multiply<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> result <span class="token operator">=</span> multiplyByFive<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>string<span class="token punctuation">_</span>of<span class="token punctuation">_</span>int<span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <p>上面的乘法函数相当于</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> multiply <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token operator">=></span> x <span class="token operator">*</span> y<span class="token punctuation">;</span>
</code></pre>
            <p>OCaml 为我们优化了这一点，以避免不必要的函数分配。</p>
            <h3>可选的标签参数</h3>
            <p>在 Reason 中可以用 <code>=?</code> 创建可选的标签参数。</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> sayHello <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">~</span>greeting <span class="token keyword">as</span> g<span class="token punctuation">,</span> <span class="token operator">~</span>name<span class="token operator">=?</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> person <span class="token operator">=</span>
    switch <span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token operator">|</span> None <span class="token operator">=></span> <span class="token string">""</span>
      <span class="token operator">|</span> Some<span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">=></span> a
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>g <span class="token operator">++</span> <span class="token string">" "</span> <span class="token operator">++</span> person<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

sayHello<span class="token punctuation">(</span><span class="token operator">~</span>greeting<span class="token operator">=</span><span class="token string">"Marhaba"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
sayHello<span class="token punctuation">(</span><span class="token operator">~</span>greeting<span class="token operator">=</span><span class="token string">"Ahlan ya"</span><span class="token punctuation">,</span> <span class="token operator">~</span>name<span class="token operator">=</span><span class="token string">"Parker"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <p>在函数定义的第三个索引中注意到括号 ()，并在上面调用。没有它，Reason 就无法解析函数。<code>greeting</code> 和 <code>name</code> 都可以柯里化和无序运用，所以目前还不清楚 sayHello(~greeting =“Aloha”) 是什么意思。OCaml 解析 () 表示可选标记的 arg 被省略了。否则，它会将该函数解析为正在等待要应用的名称的curried函数。</p>
            <pre><code class="language-ocaml"><span class="token operator">/*</span> 这里我们调用上面定义的实际函数sayHello。 <span class="token operator">*/</span>
<span class="token keyword">let</span> actualFunction <span class="token operator">=</span> sayHello<span class="token punctuation">(</span><span class="token operator">~</span>greeting<span class="token operator">=</span><span class="token string">"Marhaba"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">/*</span> 这里我们返回一个可以接受〜name参数的函数。 <span class="token operator">*/</span>
<span class="token keyword">let</span> curriedFunction <span class="token operator">=</span> sayHello<span class="token punctuation">(</span><span class="token operator">~</span>greeting<span class="token operator">=</span><span class="token string">"Marhaba"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

curriedFunction<span class="token punctuation">(</span><span class="token operator">~</span>name<span class="token operator">=</span><span class="token string">"Parker"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre>
            <p>有时，您不知道您转发给函数的值是 None 还是 Some(val)。在这种情况下，您可以提供一个明确传递的可选类型。</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> possibleName<span class="token punctuation">:</span> option<span class="token punctuation">(</span>string<span class="token punctuation">)</span> <span class="token operator">=</span> Some<span class="token punctuation">(</span><span class="token string">"Formidable"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

sayHello<span class="token punctuation">(</span><span class="token operator">~</span>greeting<span class="token operator">=</span><span class="token string">"Hi ya"</span><span class="token punctuation">,</span> <span class="token operator">~</span>name<span class="token operator">=?</span>possibleName<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <p>如果 possibleName 具有构造函数 None，那么上面的函数仍然可以工作！</p>
            <p>您还可以提供默认值，如 JS。只需在参数定义中使用 <code>=</code> 来指定它们即可。下面，除非通过明确的值，否则 Aloha 将成为问候语的值。</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> sayHello <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">~</span>greeting<span class="token operator">=</span><span class="token string">"Aloha"</span><span class="token punctuation">,</span> <span class="token operator">~</span>name<span class="token operator">=?</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> person <span class="token operator">=</span>
    switch <span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token operator">|</span> None <span class="token operator">=></span> <span class="token string">""</span>
      <span class="token operator">|</span> Some<span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">=></span> a
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>greeting <span class="token operator">++</span> <span class="token string">" "</span> <span class="token operator">++</span> person<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

sayHello<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <h3>递归函数</h3>
            <p>要定义递归函数，请使用 <code>rec</code> 关键字。</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> <span class="token keyword">rec</span> factorial <span class="token operator">=</span> <span class="token punctuation">(</span>num<span class="token punctuation">:</span> int<span class="token punctuation">)</span> <span class="token operator">=></span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>num <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    num <span class="token operator">*</span> factorial<span class="token punctuation">(</span>num <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>string<span class="token punctuation">_</span>of<span class="token punctuation">_</span>int<span class="token punctuation">(</span>factorial<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <h3>相互递归函数</h3>
            <p>函数可以在 Reason 中递归调用对方。使用 <code>and</code> 关键字来实现这一点。下面的示例还预览了我们如何在 Reason 中使用异常来创建自定义错误。</p>
            <pre><code class="language-ocaml"><span class="token keyword">exception</span> FactorialArgument<span class="token punctuation">(</span>string<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> <span class="token keyword">rec</span> factorialEven <span class="token operator">=</span> <span class="token punctuation">(</span>num<span class="token punctuation">:</span> int<span class="token punctuation">)</span> <span class="token operator">=></span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>num <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    switch <span class="token punctuation">(</span>num <span class="token operator">mod</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token operator">/*</span> 模式匹配来检查数字是偶数还是奇数。 <span class="token operator">*/</span>
      <span class="token operator">|</span> <span class="token number">0</span> <span class="token operator">=></span> num <span class="token operator">*</span> factorialOdd<span class="token punctuation">(</span>num <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>
      <span class="token operator">|</span> <span class="token number">1</span> <span class="token operator">=></span>
        raise<span class="token punctuation">(</span>
          FactorialArgument<span class="token punctuation">(</span>
            <span class="token string">"factorialEven only accepts even-numbered arguments."</span>
            <span class="token punctuation">)</span>
          <span class="token punctuation">)</span>
      <span class="token operator">|</span> <span class="token punctuation">_</span> <span class="token operator">=></span> <span class="token number">1</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token operator">and</span> factorialOdd <span class="token operator">=</span> <span class="token punctuation">(</span>num<span class="token punctuation">:</span> int<span class="token punctuation">)</span> <span class="token operator">=></span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>num <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    switch <span class="token punctuation">(</span>num <span class="token operator">mod</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token operator">|</span> <span class="token number">0</span> <span class="token operator">=></span>
        raise<span class="token punctuation">(</span>
          FactorialArgument<span class="token punctuation">(</span>
            <span class="token string">"factorialOdd only accepts odd-numbered arguments."</span>
            <span class="token punctuation">)</span>
          <span class="token punctuation">)</span>
      <span class="token operator">|</span> <span class="token number">1</span> <span class="token operator">=></span> num <span class="token operator">*</span> factorialEven<span class="token punctuation">(</span>num <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>
      <span class="token operator">|</span> <span class="token punctuation">_</span> <span class="token operator">=></span> <span class="token number">1</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>string<span class="token punctuation">_</span>of<span class="token punctuation">_</span>int<span class="token punctuation">(</span>factorialEven<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>string<span class="token punctuation">_</span>of<span class="token punctuation">_</span>int<span class="token punctuation">(</span>factorialOdd<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre>
            <p>以下调用会抛出我们的 FactorialArgument 异常，并说 factorialEven 只接受偶数参数。</p>
            <pre><code class="language-ocaml">print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>string<span class="token punctuation">_</span>of<span class="token punctuation">_</span>int<span class="token punctuation">(</span>factorialEven<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <p>如果您来自 JS，上述模式的用处就会起作用，因为 Reason / OCaml 不会提升变量或函数声明！考虑如何调用两个函数 a 和 b 来调用另一个函数。这在 JS 中是可行的，因为函数声明被提升到作用域的顶部。既然 Reason 没有提升，相互递归就是解决这个问题的一种技术。</p>
            <h3>更多关于类型</h3>
            <p>您可以在 Reason 中创建参数化类型，以使类型更具表现力。它们像函数一样，接受参数和返回类型。类型参数前缀为 <code>'</code>。</p>
            <pre><code class="language-ocaml"><span class="token keyword">type</span> measurements<span class="token punctuation">(</span><span class="token type variable">'a</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token type variable">'a</span><span class="token punctuation">,</span> <span class="token type variable">'a</span><span class="token punctuation">)</span>
<span class="token keyword">type</span> measurementsInt <span class="token operator">=</span> measurements<span class="token punctuation">(</span>int<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> measurementsString <span class="token operator">=</span> measurements<span class="token punctuation">(</span>string<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> modalSize<span class="token punctuation">:</span> measurements<span class="token punctuation">(</span>int<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> modalArea <span class="token operator">=</span> fst<span class="token punctuation">(</span>modalSize<span class="token punctuation">)</span> <span class="token operator">*</span> snd<span class="token punctuation">(</span>modalSize<span class="token punctuation">)</span><span class="token punctuation">;</span>

print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>string<span class="token punctuation">_</span>of<span class="token punctuation">_</span>int<span class="token punctuation">(</span>modalArea<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> dialogSize<span class="token punctuation">:</span> measurements<span class="token punctuation">(</span>string<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">"500"</span><span class="token punctuation">,</span> <span class="token string">"1000"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token punctuation">(</span>w<span class="token punctuation">,</span> h<span class="token punctuation">)</span> <span class="token operator">=</span> dialogSize<span class="token punctuation">;</span>
<span class="token keyword">let</span> dialogDescription <span class="token operator">=</span> <span class="token punctuation">{</span>j<span class="token operator">|</span> This dialog is <span class="token operator">$</span>w by <span class="token operator">$</span>h px <span class="token operator">|</span>j<span class="token punctuation">}</span><span class="token punctuation">;</span>

print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>dialogDescription<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre>
            <p>大多数情况下，Reason 的类型推断将会为您处理参数类型!</p>
            <p>类型也可以使用变体。</p>
            <pre><code class="language-ocaml"><span class="token keyword">type</span> httpResult<span class="token punctuation">(</span><span class="token type variable">'a</span><span class="token punctuation">,</span> <span class="token type variable">'b</span><span class="token punctuation">)</span> <span class="token operator">=</span>
  <span class="token operator">|</span> Success<span class="token punctuation">(</span><span class="token type variable">'a</span><span class="token punctuation">)</span>
  <span class="token operator">|</span> Failure<span class="token punctuation">(</span><span class="token type variable">'b</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> payload <span class="token operator">=</span> <span class="token punctuation">{</span>
  data<span class="token punctuation">:</span> string<span class="token punctuation">,</span>
  code<span class="token punctuation">:</span> int<span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre>
            <p>组合类型 <code>httpResult</code> 需要两个参数，并将它们应用于 <code>Success</code> 和 <code>Failure</code> 构造函数。</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> result<span class="token punctuation">:</span> httpResult<span class="token punctuation">(</span>payload<span class="token punctuation">,</span> int<span class="token punctuation">)</span> <span class="token operator">=</span> Success<span class="token punctuation">(</span><span class="token punctuation">{</span>
    data<span class="token punctuation">:</span> <span class="token string">"woohoo"</span><span class="token punctuation">,</span>
    code<span class="token punctuation">:</span> <span class="token number">200</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> errResult<span class="token punctuation">:</span> httpResult<span class="token punctuation">(</span>payload<span class="token punctuation">,</span> int<span class="token punctuation">)</span> <span class="token operator">=</span> Failure<span class="token punctuation">(</span><span class="token number">404</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <p>由于 Reason 的类型系统允许使用类型级别的函数，因此不需要太多类型的样板。例如，我们可以使用 <code>list(int)</code> 和 <code>list(string)</code>，而不需要为每个都创建一个新的基本类型，即 listOfInt 和 listOfString。这使得 Reason 的类型系统具有超凡的表现力，同时仍然提供了坚如磐石的系统的脚手架。请享用！</p>
            <h3>相互递归类型</h3>
            <p>类型如函数，可以是相互递归的。</p>
            <pre><code class="language-ocaml"><span class="token keyword">type</span> professor <span class="token operator">=</span> <span class="token punctuation">{</span>courses<span class="token punctuation">:</span> list<span class="token punctuation">(</span>course<span class="token punctuation">)</span><span class="token punctuation">}</span>
<span class="token operator">and</span> course <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> string<span class="token punctuation">,</span>
  professor<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
            <h3>解构</h3>
            <p>解构是 Reason 中的常见模式，对于从结构中提取数据非常有用。</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> teams <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">"Mariners"</span><span class="token punctuation">,</span> <span class="token string">"Red Sox"</span><span class="token punctuation">,</span> <span class="token string">"Astros"</span><span class="token punctuation">,</span> <span class="token string">"Twins"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token punctuation">(</span>ms<span class="token punctuation">,</span> bosox<span class="token punctuation">,</span> stros<span class="token punctuation">,</span> twins<span class="token punctuation">)</span> <span class="token operator">=</span> teams<span class="token punctuation">;</span>

print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>
  <span class="token punctuation">{</span>j<span class="token operator">|$</span>ms<span class="token punctuation">,</span> <span class="token operator">$</span>bosox<span class="token punctuation">,</span> <span class="token operator">$</span>stros<span class="token punctuation">,</span> <span class="token operator">$</span>twins <span class="token operator">===</span> Parkie<span class="token operator">-</span>Doo's playoff picks<span class="token punctuation">.</span><span class="token operator">|</span>j<span class="token punctuation">}</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <p>以下是如何解构 Reason 记录。它看起来很像 JS 中的对象解构。</p>
            <pre><code class="language-ocaml"><span class="token keyword">type</span> album <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> string<span class="token punctuation">,</span>
  artist<span class="token punctuation">:</span> string<span class="token punctuation">,</span>
  year<span class="token punctuation">:</span> int<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> myFavoriteAlbum<span class="token punctuation">:</span> album <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">"Illinois"</span><span class="token punctuation">,</span>
  artist<span class="token punctuation">:</span> <span class="token string">"Sufjan Stevens"</span><span class="token punctuation">,</span>
  year<span class="token punctuation">:</span> <span class="token number">2004</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> <span class="token punctuation">{</span>name<span class="token punctuation">,</span> artist<span class="token punctuation">,</span> year<span class="token punctuation">}</span> <span class="token operator">=</span> myFavoriteAlbum<span class="token punctuation">;</span>

print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span><span class="token punctuation">{</span>j<span class="token operator">|$</span>artist wrote <span class="token operator">$</span>name <span class="token keyword">in</span> <span class="token operator">$</span>year<span class="token punctuation">.</span><span class="token operator">|</span>j<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <p>当您解构它们的时候也可以给变量起别名，全部在一行中！这与 ES6 解构相似。</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> <span class="token punctuation">{</span>name<span class="token punctuation">:</span> n<span class="token punctuation">,</span> artist<span class="token punctuation">:</span> a<span class="token punctuation">,</span> year<span class="token punctuation">:</span> y<span class="token punctuation">}</span> <span class="token operator">=</span> myFavoriteAlbum<span class="token punctuation">;</span>

print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span><span class="token punctuation">{</span>j<span class="token operator">|$</span>a wrote <span class="token operator">$</span>n <span class="token keyword">in</span> <span class="token operator">$</span>y<span class="token punctuation">.</span><span class="token operator">|</span>j<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
            <p>你甚至可以解构和别名函数参数！</p>
            <pre><code class="language-ocaml"><span class="token keyword">type</span> exclamation <span class="token operator">=</span> <span class="token punctuation">{</span>
  phrase<span class="token punctuation">:</span> string<span class="token punctuation">,</span>
  volume<span class="token punctuation">:</span> float<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> exclaim <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">~</span>exclamation <span class="token keyword">as</span> <span class="token punctuation">{</span>phrase<span class="token punctuation">}</span> <span class="token keyword">as</span> exclamation<span class="token punctuation">)</span> <span class="token operator">=></span>
<span class="token operator">/*</span> 您可以访问惊叹号（记录）和 短语属性作为一个解构变量。 <span class="token operator">*/</span>
print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>
  <span class="token punctuation">{</span>j<span class="token operator">|</span>And lo<span class="token punctuation">,</span> Parkie<span class="token operator">-</span>Doo shouted<span class="token punctuation">,</span> <span class="token operator">$</span>phrase at <span class="token operator">$</span>exclamation<span class="token punctuation">.</span>volume DB<span class="token punctuation">.</span><span class="token operator">|</span>j<span class="token punctuation">}</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

exclaim<span class="token punctuation">(</span><span class="token operator">~</span>exclamation<span class="token operator">=</span><span class="token punctuation">{</span>phrase<span class="token punctuation">:</span> <span class="token string">"Breathtaking, this Reason!"</span><span class="token punctuation">,</span> volume<span class="token punctuation">:</span> <span class="token number">120.7</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <h3>模式匹配</h3>
            <p>模式匹配是将数据与一组值相匹配的好方法。模式匹配最好与变体一起使用 - 何时这样做，我们可以从类型系统获得很好的全面帮助，从而检查不匹配的案例。</p>
            <pre><code class="language-ocaml"><span class="token keyword">type</span> victory <span class="token operator">=</span>
  <span class="token operator">|</span> NailBiter<span class="token punctuation">(</span>int<span class="token punctuation">)</span>
  <span class="token operator">|</span> BlowOut<span class="token punctuation">(</span>int<span class="token punctuation">)</span>
  <span class="token operator">|</span> OT<span class="token punctuation">(</span>string<span class="token punctuation">,</span> int<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> myVictory<span class="token punctuation">:</span> victory <span class="token operator">=</span> OT<span class="token punctuation">(</span><span class="token string">"8:03"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <p>模式匹配允许我们解构变体，分别处理每个案例。要查看编​​译器警告你一个不匹配的情况，请尝试在下面注释掉 BlowOut。</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> myOTVictory <span class="token operator">=</span>
  switch <span class="token punctuation">(</span>myVictory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">|</span> NailBiter<span class="token punctuation">(</span>margin<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>j<span class="token operator">|</span>yeesh<span class="token punctuation">,</span> close game<span class="token punctuation">.</span> Nice win by <span class="token operator">$</span>margin<span class="token punctuation">.</span><span class="token operator">|</span>j<span class="token punctuation">}</span>
    <span class="token operator">|</span> BlowOut<span class="token punctuation">(</span>margin<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>j<span class="token operator">|</span>Damn<span class="token punctuation">,</span> what a blowout<span class="token punctuation">.</span> <span class="token operator">$</span>margin run is impressive<span class="token operator">|</span>j<span class="token punctuation">}</span>
    <span class="token operator">|</span> OT<span class="token punctuation">(</span>time<span class="token punctuation">,</span> margin<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>j<span class="token operator">|</span>It took <span class="token operator">$</span>time <span class="token keyword">to</span> win by <span class="token operator">$</span>margin<span class="token punctuation">.</span> But a win's a win<span class="token punctuation">.</span><span class="token operator">|</span>j<span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>myOTVictory<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <p>我们也可以用其他数据结构来切换其他情况。例如，一个 <code>array(int)</code>。</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">|</span><span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">600</span><span class="token operator">|</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> handleArray <span class="token operator">=</span> <span class="token punctuation">(</span>array<span class="token punctuation">:</span> array<span class="token punctuation">(</span>int<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">=></span>
  switch <span class="token punctuation">(</span>array<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">|</span> <span class="token punctuation">[</span><span class="token operator">|</span><span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">600</span><span class="token operator">|</span><span class="token punctuation">]</span> <span class="token operator">=></span> print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span><span class="token string">"This is a very specific case."</span><span class="token punctuation">)</span>
    <span class="token operator">|</span> <span class="token punctuation">[</span><span class="token operator">|</span><span class="token number">500</span><span class="token punctuation">,</span> <span class="token punctuation">_</span><span class="token operator">|</span><span class="token punctuation">]</span> <span class="token operator">=></span> print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span><span class="token string">"You have two items in this array, and the first is 500."</span><span class="token punctuation">)</span>
    <span class="token operator">|</span> <span class="token punctuation">[</span><span class="token operator">|</span><span class="token punctuation">_</span><span class="token punctuation">,</span> <span class="token punctuation">_</span><span class="token operator">|</span><span class="token punctuation">]</span> <span class="token operator">=></span> print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span><span class="token string">"You have two items in this array."</span><span class="token punctuation">)</span>
    <span class="token operator">|</span> <span class="token punctuation">_</span> <span class="token operator">=></span> print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span><span class="token string">"This is the default."</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

handleArray<span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
handleArray<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">|</span><span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">601</span><span class="token operator">|</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
handleArray<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">|</span><span class="token number">101</span><span class="token punctuation">,</span> <span class="token number">102</span><span class="token operator">|</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
handleArray<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">|</span><span class="token number">1</span>s<span class="token operator">|</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <p>你甚至可以模式匹配一​​组结果到一个特定的结果。例如，让我们将服务器上的错误映射到特定的结果。</p>
            <pre><code class="language-ocaml"><span class="token keyword">type</span> httpResultWithCode <span class="token operator">=</span>
  <span class="token operator">|</span> Success<span class="token punctuation">(</span>int<span class="token punctuation">,</span> list<span class="token punctuation">(</span>string<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token operator">|</span> Failure<span class="token punctuation">(</span>int<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> handleResult <span class="token operator">=</span> <span class="token punctuation">(</span>res<span class="token punctuation">:</span> httpResultWithCode<span class="token punctuation">)</span> <span class="token operator">=></span>
  switch <span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">|</span> Success<span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span> <span class="token operator">=></span>
      <span class="token keyword">let</span> f <span class="token operator">=</span> <span class="token punctuation">(</span>acc<span class="token punctuation">,</span> el<span class="token punctuation">)</span> <span class="token operator">=></span> acc <span class="token operator">++</span> <span class="token string">" "</span> <span class="token operator">++</span> el<span class="token punctuation">;</span>
      <span class="token operator">/*</span> 我们在这里使用 fold<span class="token punctuation">_</span>left 来连接字符串。 fold<span class="token punctuation">_</span>left 类似于 reduce，但用于列表！ <span class="token operator">*/</span>
      <span class="token keyword">let</span> resString <span class="token operator">=</span> ListLabels<span class="token punctuation">.</span>fold<span class="token punctuation">_</span>left<span class="token punctuation">(</span><span class="token operator">~</span>f<span class="token punctuation">,</span> <span class="token operator">~</span>init<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
      print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span><span class="token punctuation">{</span>j<span class="token operator">|</span>data<span class="token punctuation">:</span> <span class="token operator">$</span>resString<span class="token operator">|</span>j<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">|</span> Failure<span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span>
    <span class="token operator">|</span> Failure<span class="token punctuation">(</span><span class="token number">502</span><span class="token punctuation">)</span> <span class="token operator">=></span> print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span><span class="token string">"Server error."</span><span class="token punctuation">)</span>
    <span class="token operator">|</span> Failure<span class="token punctuation">(</span><span class="token number">404</span><span class="token punctuation">)</span> <span class="token operator">=></span> print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span><span class="token string">"Not found."</span><span class="token punctuation">)</span>
    <span class="token operator">|</span> <span class="token punctuation">_</span> <span class="token operator">=></span> print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span><span class="token string">"we don't know what happened, sorry!"</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

handleResult<span class="token punctuation">(</span>Failure<span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
handleResult<span class="token punctuation">(</span>Failure<span class="token punctuation">(</span><span class="token number">501</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
handleResult<span class="token punctuation">(</span>Success<span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">"You"</span><span class="token punctuation">,</span> <span class="token string">"Rock"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
handleResult<span class="token punctuation">(</span>Success<span class="token punctuation">(</span><span class="token number">201</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">"You"</span><span class="token punctuation">,</span> <span class="token string">"Are"</span><span class="token punctuation">,</span> <span class="token string">"Still"</span><span class="token punctuation">,</span> <span class="token string">"Great"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <p>您也可以使用 <code>when</code> 子句来检查案例的特定条件。这就像在你的模式匹配逻辑中添加一点点 <code>if</code> 语法糖。扩展我们上面的例子：</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> isServerError <span class="token operator">=</span> err <span class="token operator">=></span> err <span class="token operator">===</span> <span class="token number">500</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> isBadGateway <span class="token operator">=</span> err <span class="token operator">=></span> err <span class="token operator">===</span> <span class="token number">502</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> handleResult <span class="token operator">=</span> <span class="token punctuation">(</span>res<span class="token punctuation">:</span> httpResultWithCode<span class="token punctuation">)</span> <span class="token operator">=></span>
  switch <span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">|</span> Success<span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span> <span class="token operator">=></span>
      <span class="token keyword">let</span> f <span class="token operator">=</span> <span class="token punctuation">(</span>acc<span class="token punctuation">,</span> el<span class="token punctuation">)</span> <span class="token operator">=></span> acc <span class="token operator">++</span> <span class="token string">" "</span> <span class="token operator">++</span> el<span class="token punctuation">;</span>
      <span class="token keyword">let</span> resString <span class="token operator">=</span> ListLabels<span class="token punctuation">.</span>fold<span class="token punctuation">_</span>left<span class="token punctuation">(</span><span class="token operator">~</span>f<span class="token punctuation">,</span> <span class="token operator">~</span>init<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
      print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span><span class="token punctuation">{</span>j<span class="token operator">|</span>data<span class="token punctuation">:</span> <span class="token operator">$</span>resString<span class="token operator">|</span>j<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">|</span> Failure<span class="token punctuation">(</span>errCode<span class="token punctuation">)</span> when isServerError<span class="token punctuation">(</span>errCode<span class="token punctuation">)</span> <span class="token operator">=></span>
      print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span><span class="token string">"Server error."</span><span class="token punctuation">)</span>
    <span class="token operator">|</span> Failure<span class="token punctuation">(</span>errCode<span class="token punctuation">)</span> when isBadGateway<span class="token punctuation">(</span>errCode<span class="token punctuation">)</span> <span class="token operator">=></span>
      print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span><span class="token string">"Bad gateway. Getaway? Who knows?"</span><span class="token punctuation">)</span>
    <span class="token operator">|</span> Failure<span class="token punctuation">(</span><span class="token number">404</span><span class="token punctuation">)</span> <span class="token operator">=></span> print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span><span class="token string">"Not found."</span><span class="token punctuation">)</span>
    <span class="token operator">|</span> <span class="token punctuation">_</span> <span class="token operator">=></span> print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span><span class="token string">"we don't know what happened, sorry!"</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

handleResult<span class="token punctuation">(</span>Failure<span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
handleResult<span class="token punctuation">(</span>Failure<span class="token punctuation">(</span><span class="token number">502</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <p>您也可以嵌套模式，这意味着我们可以对数据结构的嵌套属性进行模式匹配。</p>
            <pre><code class="language-ocaml"><span class="token keyword">type</span> composer <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> string<span class="token punctuation">,</span>
  concertos<span class="token punctuation">:</span> int<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> evaluateComposer <span class="token operator">=</span> <span class="token punctuation">(</span>composer<span class="token punctuation">:</span> composer<span class="token punctuation">)</span> <span class="token operator">=></span>
  switch <span class="token punctuation">(</span>composer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">|</span> <span class="token punctuation">{</span>name<span class="token punctuation">:</span> <span class="token string">"Beethoven"</span> <span class="token operator">|</span> <span class="token string">"Mozart"</span> <span class="token operator">|</span> <span class="token string">"Debussy"</span><span class="token punctuation">}</span> <span class="token operator">=></span> <span class="token string">"What high class. How fancy!"</span>
    <span class="token operator">|</span> composer when composer<span class="token punctuation">.</span>concertos <span class="token operator">&lt;=</span> <span class="token number">7</span> <span class="token operator">=></span> <span class="token string">"Not too bad, but nothing special."</span>
    <span class="token operator">|</span> <span class="token punctuation">_</span> <span class="token operator">=></span> <span class="token string">"Just another composer"</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>evaluateComposer<span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token punctuation">:</span> <span class="token string">"Debussy"</span><span class="token punctuation">,</span> concertos<span class="token punctuation">:</span> <span class="token number">57</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>evaluateComposer<span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token punctuation">:</span> <span class="token string">"Jerry"</span><span class="token punctuation">,</span> concertos<span class="token punctuation">:</span> <span class="token number">7</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <h3>变动</h3>
            <p><code>let</code> 绑定默认情况下是不可变的。如果你需要改变一个 <code>let</code> 绑定,使用 <code>ref</code> 关键字的包起它的值。</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> mutableVar <span class="token operator">=</span> ref<span class="token punctuation">(</span><span class="token string">"mutable"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <p>要访问它，请使用 <code>^</code> 运算符。</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> mutableReference <span class="token operator">=</span> mutableVar<span class="token operator">^</span><span class="token punctuation">;</span>
</code></pre>
            <p>要重新分配一个可变变量，请使用 <code>:=</code> 运算符。</p>
            <pre><code class="language-ocaml">mutableVar <span class="token operator">:=</span> <span class="token string">"mutated"</span><span class="token punctuation">;</span>
print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>mutableVar<span class="token operator">^</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <p>然而，你也可以简单地通过用另一个let绑定来映射它们来改变变量。</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> shodow <span class="token operator">=</span> <span class="token string">"First I am this!"</span><span class="token punctuation">;</span>

print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>shadow<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> shadow <span class="token operator">=</span> <span class="token string">"But now I've been shadowed!"</span><span class="token punctuation">;</span>

print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>shadow<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <h3>命令式循环</h3>
            <p>for 循环在 Reason 中迭代从一个开始直到包括一个结束值。</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> repeatCapitalize <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">~</span>time<span class="token punctuation">:</span> int<span class="token punctuation">,</span> <span class="token operator">~</span>str<span class="token punctuation">:</span> string<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> ref<span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span>time <span class="token keyword">in</span> <span class="token number">1</span> <span class="token keyword">to</span> times<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    switch <span class="token punctuation">(</span>time <span class="token operator">mod</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token operator">|</span> <span class="token number">0</span> <span class="token operator">=></span> result <span class="token operator">:=</span> result<span class="token operator">^</span> <span class="token operator">++</span> String<span class="token punctuation">.</span>capitalize<span class="token punctuation">(</span>str<span class="token punctuation">)</span>
      <span class="token operator">|</span> <span class="token number">1</span> <span class="token operator">=></span> result <span class="token operator">:=</span> result<span class="token operator">^</span> <span class="token operator">++</span> str
      <span class="token operator">|</span> <span class="token punctuation">_</span> <span class="token operator">=></span> result <span class="token operator">:=</span> result<span class="token operator">^</span> <span class="token operator">++</span> str
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  result<span class="token operator">^</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>repeatCapitalize<span class="token punctuation">(</span><span class="token operator">~</span>time<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token operator">~</span>str<span class="token operator">=</span><span class="token string">"reason"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <p>您也可以使用 <code>downto</code> 操作符从一个数字开始迭代。</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> factorialSum <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">~</span>num<span class="token punctuation">:</span> int<span class="token punctuation">)</span><span class="token punctuation">:</span> int <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> ref<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span>n <span class="token keyword">in</span> num <span class="token keyword">downto</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    result <span class="token operator">:=</span> result<span class="token operator">^</span> <span class="token operator">+</span> n<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  result<span class="token operator">^</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>string<span class="token punctuation">_</span>of<span class="token punctuation">_</span>int<span class="token punctuation">(</span>factorialSum<span class="token punctuation">(</span><span class="token operator">~</span>num<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <p>总的来说，<code>Array</code> 和 <code>List</code> 方法可能会让你更接近你想要的东西，而不是 for 循环，但是它们很好知道。您也可以像在 JS 中那样使用 while 循环。</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> count <span class="token operator">=</span> ref<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">while</span> <span class="token punctuation">(</span>count <span class="token operator">&lt;</span> ref<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span><span class="token string">"We are while looping!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  count <span class="token operator">:=</span> count<span class="token operator">^</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
            <p>使用上面的可变绑定来跳出循环。Reason 没有像 JS 这样的 <code>break</code> 关键字的概念。</p>
            <h3>JSX</h3>
            <p>Reason 本身支持 JSX 。调用如下：</p>
            <pre><code class="language-ocaml"><span class="token operator">&lt;</span>div foo<span class="token operator">=</span><span class="token punctuation">{</span>bar<span class="token punctuation">}</span><span class="token operator">></span> child1 child2 <span class="token operator">&lt;/</span>div<span class="token operator">></span>
</code></pre>
            <p>变成：</p>
            <pre><code class="language-ocaml"><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">@</span>JSX<span class="token punctuation">]</span> div<span class="token punctuation">(</span><span class="token operator">~</span>foo<span class="token operator">=</span>bar<span class="token punctuation">,</span> <span class="token operator">~</span>children<span class="token operator">=</span><span class="token punctuation">[</span>child1<span class="token punctuation">,</span> child2<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <p>[@JSX] 语法将一个函数标记为想要格式化为 JSX。这在任何 Reason 库中都是允许的，而不仅仅是 ReasonReact，来利用JSX。</p>
            <h3>外部对象</h3>
            <p>外部是理性与其他语言（通常是 JS ）的交互方式。使用外部最常用的方法之一是加载模块。例如，让我们从这个 repo 中的 findS 模块加载 findS 函数。</p>
            <pre><code class="language-ocaml"><span class="token punctuation">[</span><span class="token operator">@</span>bs<span class="token punctuation">.</span><span class="token keyword">module</span> <span class="token string">"./findS"</span><span class="token punctuation">]</span> <span class="token keyword">external</span> findS<span class="token punctuation">:</span> string <span class="token operator">=></span> int <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> twos <span class="token operator">=</span> findS<span class="token punctuation">(</span><span class="token string">"strings"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>string<span class="token punctuation">_</span>of<span class="token punctuation">_</span>int<span class="token punctuation">(</span>twos<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <p>优雅！我们从 Reason 中调用了一个 JS 函数！上面的注释允许我们从 findS 模块中键入函数 findS，并返回一个类型安全引用到该模块。让我们看看我们如何访问一个作用域函数，比如 Math.random。</p>
            <pre><code class="language-ocaml"><span class="token punctuation">[</span><span class="token operator">@</span>bs<span class="token punctuation">.</span><span class="token keyword">val</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">@</span>bs<span class="token punctuation">.</span>scope <span class="token string">"Math"</span><span class="token punctuation">]</span> <span class="token keyword">external</span> random <span class="token punctuation">:</span> unit <span class="token operator">=></span> float <span class="token operator">=</span> <span class="token string">"random"</span><span class="token punctuation">;</span>
<span class="token punctuation">[</span><span class="token operator">@</span>bs<span class="token punctuation">.</span><span class="token keyword">val</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">@</span>bs<span class="token punctuation">.</span>scope <span class="token string">"Math"</span><span class="token punctuation">]</span> <span class="token keyword">external</span> floor <span class="token punctuation">:</span> float <span class="token operator">=></span> int <span class="token operator">=</span> <span class="token string">"floor"</span><span class="token punctuation">;</span>
</code></pre>
            <p>在上面的定义中，我们说在 Math 作用域中有一个方法叫做 <code>random</code>。它将 unit 类型作为参数并返回一个浮点数。我们将它别名命名为 <code>random</code> ，以便在 Reason 中使用。现在我们可以使用它！</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> getRandomInt <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">~</span>max <span class="token keyword">as</span> m<span class="token punctuation">:</span> float<span class="token punctuation">)</span> <span class="token operator">=></span>
  floor<span class="token punctuation">(</span>random<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*.</span> float<span class="token punctuation">_</span>of<span class="token punctuation">_</span>int<span class="token punctuation">(</span>floor<span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>string<span class="token punctuation">_</span>of<span class="token punctuation">_</span>int<span class="token punctuation">(</span>getRandomInt<span class="token punctuation">(</span><span class="token operator">~</span>max<span class="token operator">=</span><span class="token number">100.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <h3>对象</h3>
            <p>大多数情况下，您将使用记录来存储名称和值。但有时候，你会想要一个对象。请注意，Reason 中的对象与 JS 对象不同。使用 <code>pub</code> 关键字将对象的公共值前缀。 <code>val</code> 可用于定义不可从外部访问的对象上的值。 <code>pri</code> 可以定义私有方法。</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> anUntypeReasonObject <span class="token operator">=</span> <span class="token punctuation">{</span>pub city <span class="token operator">=</span> <span class="token string">"Burlington"</span><span class="token punctuation">;</span> <span class="token keyword">val</span> state <span class="token operator">=</span> <span class="token string">"Vermont"</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>anUntypeReasonObject#city<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <p>Reason 对象不需要类型定义。如果我们确定它们，则该对象必须具有所提供的类型的形状。</p>
            <pre><code class="language-ocaml"><span class="token keyword">type</span> locale <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">.</span>
  city<span class="token punctuation">:</span> string<span class="token punctuation">,</span>
  state<span class="token punctuation">:</span> string<span class="token punctuation">,</span>
  population<span class="token punctuation">:</span> int<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> burlington<span class="token punctuation">:</span> locale <span class="token operator">=</span> <span class="token punctuation">{</span>
  pub city <span class="token operator">=</span> <span class="token string">"Burlington"</span><span class="token punctuation">;</span>
  pub state <span class="token operator">=</span> <span class="token string">"Vermont"</span><span class="token punctuation">;</span>
  pub population <span class="token operator">=</span> <span class="token number">56000</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>string<span class="token punctuation">_</span>of<span class="token punctuation">_</span>int<span class="token punctuation">(</span>burlington#population<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <p>两个点（称为elision）表示此对象已打开，并且可以具有除原始类型属性之外的属性。开放对象是多态的，需要一个类型参数。</p>
            <pre><code class="language-ocaml"><span class="token keyword">type</span> localeOpen<span class="token punctuation">(</span><span class="token type variable">'a</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span> getplace<span class="token punctuation">:</span> unit <span class="token operator">=></span> string<span class="token punctuation">}</span> <span class="token keyword">as</span> <span class="token type variable">'a</span><span class="token punctuation">;</span>
</code></pre>
            <p>Reason 中的对象有一个 <code>this</code> 上下文，它指向对象本身。</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> vt<span class="token punctuation">:</span> localeOpen<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">.</span> getPlace<span class="token punctuation">:</span> unit <span class="token operator">=></span> string<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">val</span> address <span class="token operator">=</span> <span class="token string">"100 Church St"</span><span class="token punctuation">;</span>
  <span class="token keyword">val</span> city <span class="token operator">=</span> <span class="token string">"Burlington"</span><span class="token punctuation">;</span>
  <span class="token keyword">val</span> zipCode <span class="token operator">=</span> <span class="token string">"05712"</span><span class="token punctuation">;</span>
  pub getPlace <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span>
    address <span class="token operator">++</span> <span class="token string">", "</span> <span class="token operator">++</span> city <span class="token operator">++</span> <span class="token string">" "</span> <span class="token operator">++</span> zipCode <span class="token operator">++</span> <span class="token string">". "</span> <span class="token operator">++</span> this#addOn<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  pri addOn <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token string">"Didn't ya know?"</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>vt#getPlace<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <p>大多数情况下，您将使用记录或 JS 对象来实现您在 JS 中使用的内容。Reason 有一个很好的定义 JS 对象的语法。这涉及到将对象键包装在 <code>&quot;&quot;</code> 中并使用 <code>##</code> 进行访问。</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> reason <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"color"</span><span class="token punctuation">:</span> <span class="token string">"orange"</span><span class="token punctuation">,</span> <span class="token string">"language"</span><span class="token punctuation">:</span> <span class="token string">"reason"</span><span class="token punctuation">,</span> <span class="token string">"users"</span><span class="token punctuation">:</span> <span class="token number">5000</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>reason#<span class="token directive function">#language</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <p>改变 JS 对象涉及让 BuckleScript 知道我们有一个可变的键 - 值对。为此，请使用 <code>@bs.set</code> 注释类型。然后，使用 <code>#=</code> 改变它。</p>
            <pre><code class="language-ocaml"><span class="token keyword">type</span> language <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">.</span>
  <span class="token punctuation">[</span><span class="token operator">@</span>bs<span class="token punctuation">.</span>set<span class="token punctuation">]</span> <span class="token string">"color"</span><span class="token punctuation">:</span> string<span class="token punctuation">,</span>
  <span class="token string">"language"</span><span class="token punctuation">:</span> string<span class="token punctuation">,</span>
  <span class="token string">"users"</span><span class="token punctuation">:</span> int<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token punctuation">[</span><span class="token operator">@</span>bs<span class="token punctuation">.</span><span class="token keyword">module</span> <span class="token string">"./findS"</span><span class="token punctuation">]</span> <span class="token keyword">external</span> myJSObject <span class="token punctuation">:</span> language <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>

print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>myJSObject#<span class="token directive function">#language</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

myJSObject#<span class="token directive function">#color</span>#<span class="token operator">=</span><span class="token string">"orange"</span><span class="token punctuation">;</span>

print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>myJSObject#<span class="token directive function">#color</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <h3>模块</h3>
            <p>Reason 中的模块可以包含类型定义，<code>let</code> 绑定，嵌套模块，几乎任何东西。使用 module 关键字来创建一个。</p>
            <pre><code class="language-ocaml"><span class="token keyword">module</span> Earth <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> continents <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">|</span>
    <span class="token string">"Africa"</span><span class="token punctuation">,</span>
    <span class="token string">"Antarctica"</span><span class="token punctuation">,</span>
    <span class="token string">"Asia"</span><span class="token punctuation">,</span>
    <span class="token string">"Australia"</span><span class="token punctuation">,</span>
    <span class="token string">"Europe"</span><span class="token punctuation">,</span>
    <span class="token string">"North America"</span><span class="token punctuation">,</span>
    <span class="token string">"South America"</span><span class="token punctuation">,</span>
  <span class="token operator">|</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token keyword">let</span> pickContinent <span class="token operator">=</span> <span class="token punctuation">(</span>idx<span class="token punctuation">:</span> int<span class="token punctuation">)</span> <span class="token operator">=></span> continents<span class="token punctuation">[</span>idx<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> aussie <span class="token operator">=</span> Earth<span class="token punctuation">.</span>pickContinent<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>aussie<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <p>我们也可以访问嵌套模块！查看 <code>Team</code> 模块，它有一个嵌套的 <code>Boston</code> 模块。</p>
            <pre><code class="language-ocaml">print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>Team<span class="token punctuation">.</span>Boston<span class="token punctuation">.</span>team<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <p>虽然 Reason 有很好的模块推理 - 没有 <code>import</code> 概念！ - 使用 open 关键字明确地打开模块可能很有用。这将模块纳入作用域内。我们可以在本地为一个特定的函数打开一个模块，如下所示：</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> fact <span class="token operator">=</span>
  Team<span class="token punctuation">.</span>Boston<span class="token punctuation">.</span><span class="token punctuation">(</span>
    switch <span class="token punctuation">(</span>team<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token operator">|</span> <span class="token string">"Red Sox"</span> <span class="token operator">=></span> <span class="token string">"The Red Sox are DOPE."</span>
      <span class="token operator">|</span> <span class="token punctuation">_</span> <span class="token operator">=></span> <span class="token string">"Eh, don't really care."</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>fact<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <p>全局打开对于在另一个模块中获取所有内容非常有用。但是要小心，如果模块中有共享名称的成员，这可能会引入不必要的命名冲突/阴影。</p>
            <pre><code class="language-ocaml"><span class="token keyword">open</span> Team<span class="token punctuation">.</span>Boston<span class="token punctuation">;</span>
</code></pre>
            <p>模块也可以相互扩展，在传统的 OOP 语言中履行继承或混合的角色。</p>
            <pre><code class="language-ocaml"><span class="token keyword">module</span> ExtendedBoston <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">include</span> Team<span class="token punctuation">.</span>Boston<span class="token punctuation">;</span>
  <span class="token keyword">let</span> basketball <span class="token operator">=</span> <span class="token string">"Celtics"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>ExtendedBoston<span class="token punctuation">.</span>team<span class="token punctuation">)</span><span class="token punctuation">;</span>

print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span>ExtendedBoston<span class="token punctuation">.</span>basketball<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <h3>Promises</h3>
            <p>Reason 中的 Promises 通过使用 Js.Promise.* 方法的 BuckleScript 处理。注意。<code>.</code> 作为第一个参数传递到 <code>resolve</code> 。这可以让 BuckleScript 知道这是一个非柯里化函数。这是在 BuckleScript 2.2.2 中引入的。如果使用旧版本的 bs-platform ，则可以使用 <code>[@bs] resolve(100)</code> 获得相同的效果。</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> promise <span class="token operator">=</span> Js<span class="token punctuation">.</span>Promise<span class="token punctuation">.</span>make<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">~</span>resolve<span class="token punctuation">,</span> <span class="token operator">~</span>reject <span class="token keyword">as</span> <span class="token punctuation">_</span><span class="token punctuation">)</span> <span class="token operator">=></span> resolve<span class="token punctuation">(</span><span class="token punctuation">.</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">exception</span> Failure<span class="token punctuation">(</span>string<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> failedPromise <span class="token operator">=</span> Js<span class="token punctuation">.</span>Promise<span class="token punctuation">.</span>make<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">~</span>resolve <span class="token keyword">as</span> <span class="token punctuation">_</span><span class="token punctuation">,</span> <span class="token operator">~</span>reject<span class="token punctuation">)</span> <span class="token operator">=></span> reject<span class="token punctuation">(</span><span class="token punctuation">.</span> Failure<span class="token punctuation">(</span><span class="token string">"Rejected!"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

promise
<span class="token operator">|></span> Js<span class="token punctuation">.</span>Promise<span class="token punctuation">.</span>then<span class="token punctuation">_</span><span class="token punctuation">(</span>res <span class="token operator">=></span> <span class="token punctuation">{</span>
    Js<span class="token punctuation">.</span>log<span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    Js<span class="token punctuation">.</span>Promise<span class="token punctuation">.</span>resolve<span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">|></span> Js<span class="token punctuation">.</span>Promise<span class="token punctuation">.</span>then<span class="token punctuation">_</span><span class="token punctuation">(</span>res <span class="token operator">=></span> <span class="token punctuation">{</span>
    Js<span class="token punctuation">.</span>log<span class="token punctuation">(</span><span class="token string">"That's all folks!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Js<span class="token punctuation">.</span>Promise<span class="token punctuation">.</span>resolve<span class="token punctuation">(</span>res <span class="token operator">-</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">|></span> Js<span class="token punctuation">.</span>Promise<span class="token punctuation">.</span>catch<span class="token punctuation">(</span>err <span class="token operator">=></span> <span class="token punctuation">{</span>
    Js<span class="token punctuation">.</span>log2<span class="token punctuation">(</span><span class="token string">"Failure!!"</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    Js<span class="token punctuation">.</span>Promise<span class="token punctuation">.</span>resolve<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

failedPromise
<span class="token operator">|></span> Js<span class="token punctuation">.</span>Promise<span class="token punctuation">.</span>then<span class="token punctuation">_</span><span class="token punctuation">(</span>res <span class="token operator">=></span> <span class="token punctuation">{</span>
    Js<span class="token punctuation">.</span>log<span class="token punctuation">(</span>res<span class="token punctuation">)</span>
    Js<span class="token punctuation">.</span>Promise<span class="token punctuation">.</span>resolve<span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">|></span> Js<span class="token punctuation">.</span>Promise<span class="token punctuation">.</span>then<span class="token punctuation">_</span><span class="token punctuation">(</span>res <span class="token operator">=></span> <span class="token punctuation">{</span>
    Js<span class="token punctuation">.</span>Promise<span class="token punctuation">.</span>resolve<span class="token punctuation">(</span>res <span class="token operator">-</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">|></span> Js<span class="token punctuation">.</span>Promise<span class="token punctuation">.</span>catch<span class="token punctuation">(</span>err <span class="token operator">=></span> <span class="token punctuation">{</span>
    Js<span class="token punctuation">.</span>log2<span class="token punctuation">(</span><span class="token string">"Failure!!"</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    Js<span class="token punctuation">.</span>Promise<span class="token punctuation">.</span>resolve<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <h3>异常</h3>
            <p>异常是一种特殊的变体，在 Reason 中不常使用。</p>
            <p>下面的函数展示了如何使用 <code>raise</code> 关键字使用 <code>Not_found</code>、<code>exception</code>。</p>
            <pre><code class="language-ocaml"><span class="token keyword">let</span> aFunkyList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"Parliament"</span><span class="token punctuation">,</span> <span class="token string">"Funkadelic"</span><span class="token punctuation">,</span> <span class="token string">"George Clinton"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>List<span class="token punctuation">.</span>exists<span class="token punctuation">(</span>item <span class="token operator">=></span> item <span class="token operator">===</span><span class="token string">"Stevie Wonder"</span><span class="token punctuation">,</span> aFunkyList<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    print<span class="token punctuation">_</span>endline<span class="token punctuation">(</span><span class="token string">"Yay Stevie!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token operator">/*</span> 在这里，我们引发 Exception 变体的 Not<span class="token punctuation">_</span>found 构造函数。 <span class="token operator">*/</span>
    raise<span class="token punctuation">(</span>Not<span class="token punctuation">_</span>found<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre>

          </div>
        </div>
      </div>
    </div>
  </body>

</html>