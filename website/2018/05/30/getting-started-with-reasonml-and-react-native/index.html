<!--
 * @Author: Leland
 * @Date: 2019-12-27 15:59:00
 * @Description: Description
 -->
<!doctype html>
<html>

  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui" />
    <title>å¼€å§‹ä½¿ç”¨ ReasonML å’Œ React Native</title>
    <link href="/css/style.css" rel="stylesheet" />
    <meta name="description" content="å¼€å§‹ä½¿ç”¨ ReasonML å’Œ React Native">
  </head>

  <body>
    <div>
      <div>
        <header class="header">
          <div class="container header-wrap">
            <h1 class="site-name">
              <a href="/">
                é¦–é¡µ
              </a>
            </h1>
            <ul class="nav">
              <li class="nav-item">
                <a href="/about">å…³äº</a>
              </li>
            </ul>
          </div>
        </header>
      </div>
      <div class="container main">
        <div class="page-body">
          <div class="markdown-body">
            <h1>å¼€å§‹ä½¿ç”¨ ReasonML å’Œ React Native</h1>
            <p>è¯‘è‡ªï¼š<a href="https://blog.callstack.io/getting-started-with-reasonml-and-react-native-299476389c3e">https://blog.callstack.io/getting-started-with-reasonml-and-react-native-299476389c3e</a></p>
            <p><img src="/images/1_s4A8_PwjA1Ichs6VnVq3Dg.jpeg" alt="1_s4A8_PwjA1Ichs6VnVq3Dg.jpeg">
              Photo by Will O (<a href="https://unsplash.com/photos/St4qInZrYC4">https://unsplash.com/photos/St4qInZrYC4</a>)</p>
            <blockquote>
              <p>ä»¥ä¸‹æ˜¯å¦‚ä½•å¼€å§‹ä½¿ç”¨ React Nativeå’Œ ReasonML çš„æŒ‡å—ã€‚ä¸ºäº†æœ¬åšæ–‡çš„ç›®çš„ï¼Œæˆ‘å‡è®¾æ‚¨å·²ç»ç†Ÿæ‚‰ React Native å¹¶éƒ¨åˆ†ä½¿ç”¨ ReasonML ã€‚å¦‚æœæ‚¨å°šæœªæ¥è§¦è¿‡ ReasonMLï¼Œè¯·æŸ¥çœ‹<a href="https://reasonml.github.io/docs/en/global-installation.html">æ–‡æ¡£</a>ã€‚</p>
            </blockquote>
            <p>é¦–å…ˆå®‰è£… <a href="https://facebook.github.io/react-native/docs/getting-started.html">React Native CLI</a>ï¼š</p>
            <pre><code class="language-ocaml">npm i <span class="token operator">-</span>g react<span class="token operator">-</span>native<span class="token operator">-</span>cli
</code></pre>
            <p>ç°åœ¨æˆ‘ä»¬å¯ä»¥åˆå§‹åŒ–ä¸€ä¸ªæ–°çš„ React Native é¡¹ç›®ï¼Œå°±åƒæˆ‘ä»¬å¯¹æ¯ä¸ª React Native åº”ç”¨ç¨‹åºæ‰€åšçš„ä¸€æ ·ï¼š</p>
            <pre><code class="language-ocaml">react<span class="token operator">-</span>native init MyReasonApp
</code></pre>
            <h2>æ·»åŠ  â€œ Reason éƒ¨åˆ†â€</h2>
            <p>æˆ‘ä»¬å°†éœ€è¦ 3 ä¸ªåŒ…ï¼š</p>
            <ul>
              <li><a href="https://bucklescript.github.io/docs/en/what-why.html"><code>bs-platform</code></a> - å°† ReasonML / OCaml ç¼–è¯‘ä¸ºå¹²å‡€ï¼Œå¯è¯»å’Œé«˜æ€§èƒ½çš„ JavaScript ä»£ç </li>
              <li><a href="https://reasonml.github.io/reason-react"><code>reason-react</code></a> - ReactJS çš„ Reason ç»‘å®š</li>
              <li><a href="https://github.com/reasonml-community/bs-react-native"><code>bs-react-native</code></a> - React Native çš„ BuckleScript ç»‘å®š</li>
            </ul>
            <p>è®©æˆ‘ä»¬å°†å®ƒä»¬æ·»åŠ åˆ°æˆ‘ä»¬çš„é¡¹ç›®ä¸­ï¼š</p>
            <pre><code class="language-ocaml">npm i <span class="token operator">-</span>P bs<span class="token operator">-</span>platform reason<span class="token operator">-</span>react bs<span class="token operator">-</span>react<span class="token operator">-</span>native
</code></pre>
            <p>ç°åœ¨æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ª <code>bsconfig.json</code> ï¼Œå®ƒæ˜¯ä¸€ä¸ª <a href="https://bucklescript.github.io/docs/en/build-configuration.html">BuckleScript çš„é…ç½®æ–‡ä»¶</a>ï¼š</p>
            <pre><code class="language-ocaml"><span class="token punctuation">{</span>
    <span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"my-reason-app"</span><span class="token punctuation">,</span>
    <span class="token string">"bsc-flags"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"-bs-no-version-header"</span><span class="token punctuation">,</span> <span class="token string">"-bs-super-errors"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">"refmt"</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
    <span class="token string">"bs-dependencies"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"reason-react"</span><span class="token punctuation">,</span> <span class="token string">"bs-react-native"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">"reason"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token string">"react-jsx"</span><span class="token punctuation">:</span> <span class="token number">2</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">"package-specs"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token string">"module"</span><span class="token punctuation">:</span> <span class="token string">"commonjs"</span><span class="token punctuation">,</span>
        <span class="token string">"in-source"</span><span class="token punctuation">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">"sources"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token string">"dir"</span><span class="token punctuation">:</span> <span class="token string">"src"</span><span class="token punctuation">,</span>
            <span class="token string">"subdirs"</span><span class="token punctuation">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
            <p>è®©æˆ‘ä»¬åœ¨è¿™é‡Œåœä¸€åˆ†é’Ÿã€‚æœ‰å‡ ä¸ªä¸åŒäºé€šå¸¸çš„è®¾ç½®ã€‚</p>
            <p>é¦–å…ˆæ˜¯ <a href="https://bucklescript.github.io/docs/en/build-configuration.html#sources"><code>&quot;subdirs&quot;: true</code></a>ï¼Œä½¿å¾— BuckleScript çŸ¥é“å®ƒåº”è¯¥æ£€æŸ¥åº”è¯¥ç¼–è¯‘çš„ä»£ç çš„å­ç›®å½•ã€‚</p>
            <p>å¦ä¸€ä¸ªæ˜¯ <a href="https://bucklescript.github.io/docs/en/build-configuration.html#package-specs"><code>&quot;in-source&quot;: true</code></a> ï¼Œè¿™ä¸ªéå¸¸æ–¹ä¾¿ï¼Œä¸æºæ–‡ä»¶ä¸€èµ·ç”Ÿæˆè¾“å‡ºï¼ˆé»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒä»¬è¾“å‡ºåˆ° <code>lib/js</code> ç›®å½•ä¸‹ï¼‰ã€‚å½“æˆ‘ä»¬å¼•ç”¨ <code>.js</code> æ–‡ä»¶æˆ–èµ„æºæ–‡ä»¶æ—¶ï¼Œè¿™éå¸¸æœ‰ç”¨ã€‚</p>
            <p>æ²¡æœ‰å®ƒï¼Œè¦å¯¼å…¥ä¸€ä¸ªå›¾åƒï¼Œä½ ä¼šå‚è€ƒå®ƒï¼š</p>
            <pre><code class="language-ocaml"><span class="token operator">&lt;</span>Image
  style<span class="token operator">=</span>Styles<span class="token punctuation">.</span>icon
  source<span class="token operator">=</span><span class="token punctuation">(</span>
    Required<span class="token punctuation">(</span>Packager<span class="token punctuation">.</span>require<span class="token punctuation">(</span><span class="token string">"../../../assets/right.png"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span>
<span class="token operator">/></span>
</code></pre>
            <p>ä½¿ç”¨ <code>&quot;in-source&quot;: true</code> ï¼Œå®ƒä¼šçœ‹èµ·æ¥åƒï¼š</p>
            <pre><code class="language-ocaml"><span class="token operator">&lt;</span>Image
  style<span class="token operator">=</span>Styles<span class="token punctuation">.</span>icon
  source<span class="token operator">=</span><span class="token punctuation">(</span>Required<span class="token punctuation">(</span>Packager<span class="token punctuation">.</span>require<span class="token punctuation">(</span><span class="token string">"./assets/right.png"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token operator">/></span>
</code></pre>
            <p>æˆ‘æ›´å–œæ¬¢åè€…ï¼Œå› æ­¤æˆ‘å¯ç”¨äº†è¯¥é€‰é¡¹ã€‚</p>
            <h2>React Native ä¸­çš„ ReasonML</h2>
            <p>æˆ‘ä»¬å®Œæˆäº†é…ç½®ï¼Œå›é¡¾ä¸€ä¸‹ï¼Œæˆ‘ä»¬æ·»åŠ äº†ä¸‰ä¸ªè½¯ä»¶åŒ…ï¼š<code>bs-platform</code>ï¼Œ<code>reason-react</code> å’Œ <code>bs-react-native</code>ã€‚ç„¶åæˆ‘ä»¬æ·»åŠ äº† <code>BuckleScript</code> çš„é…ç½®æ–‡ä»¶ <code>bsconfig.json</code>ï¼Œå°±æ˜¯è¿™æ ·ï¼ ğŸ‰</p>
            <p>ç°åœ¨æˆ‘ä»¬æ¥å†™ä¸€äº› Reason å§ï¼</p>
            <p>æ­£å¦‚æˆ‘ä»¬ä¹‹å‰åœ¨ <code>bsconfig.json</code> ä¸­å®šä¹‰çš„ï¼Œæˆ‘ä»¬å°†æŠŠæ‰€æœ‰çš„ ReasonML ä»£ç ä¿å­˜åœ¨ <code>src</code> ç›®å½•ä¸­ã€‚åœ¨æ–°åˆ›å»ºçš„ <code>src</code> ç›®å½•ä¸­ï¼ˆåœ¨æˆ‘ä»¬é¡¹ç›®çš„æ ¹ç›®å½•ä¸­ï¼‰ï¼Œè®©æˆ‘ä»¬æ·»åŠ <code>App.re</code> ï¼Œå®ƒå¯èƒ½çœ‹èµ·æ¥åƒè¿™æ ·ï¼š</p>
            <pre><code class="language-ocaml"><span class="token keyword">open</span> BsReactNative<span class="token punctuation">;</span>

<span class="token operator">/*</span> è¿™é‡Œæˆ‘ä»¬å®šä¹‰ä¸€äº›æ ·å¼ <span class="token operator">*/</span>
<span class="token keyword">module</span> Styles <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">open</span> Style<span class="token punctuation">;</span>

    <span class="token keyword">let</span> container <span class="token operator">=</span> 
        style<span class="token punctuation">(</span><span class="token punctuation">[</span>
            flex<span class="token punctuation">(</span><span class="token number">1.</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            justifyContent<span class="token punctuation">(</span>Center<span class="token punctuation">)</span><span class="token punctuation">,</span>
            alignItems<span class="token punctuation">(</span>Center<span class="token punctuation">)</span><span class="token punctuation">,</span>
            backgroundColor<span class="token punctuation">(</span>String<span class="token punctuation">(</span><span class="token string">"tomato"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> text <span class="token operator">=</span> style<span class="token punctuation">(</span><span class="token punctuation">[</span>color<span class="token punctuation">(</span>String<span class="token punctuation">(</span><span class="token string">"#fff"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> fontSize<span class="token punctuation">(</span>Float<span class="token punctuation">(</span><span class="token number">24.</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">module</span> Main <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> component <span class="token operator">=</span> ReasonReact<span class="token punctuation">.</span>statelessComponent<span class="token punctuation">(</span><span class="token string">"Main"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">let</span> make <span class="token operator">=</span> <span class="token punctuation">_</span>children <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>component<span class="token punctuation">,</span>
        render<span class="token punctuation">:</span> <span class="token punctuation">_</span>self <span class="token operator">=></span>
            <span class="token operator">&lt;</span>View style<span class="token operator">=</span>Styles<span class="token punctuation">.</span>container<span class="token operator">></span>
                <span class="token operator">&lt;</span>Text style<span class="token operator">=</span>Styles<span class="token punctuation">.</span>text<span class="token operator">></span>
                    <span class="token punctuation">(</span>ReasonReact<span class="token punctuation">.</span>string<span class="token punctuation">(</span><span class="token string">"Let's play with ReasonML!"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token operator">&lt;/</span>Text<span class="token operator">></span>
            <span class="token operator">&lt;/</span>View<span class="token operator">></span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> app <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token operator">&lt;</span>Main <span class="token operator">/></span><span class="token punctuation">;</span>
</code></pre>
            <p>æˆ‘è¿˜ä»é¡¹ç›®çš„æ ¹ç›®å½•ä¸­åˆ é™¤äº† <code>App.js</code>ï¼ˆè¿™æ˜¯ç”± React Native CLI ç”Ÿæˆçš„æ–‡ä»¶ï¼‰ã€‚</p>
            <p>æˆ‘ä»¬éœ€è¦åšçš„æœ€åä¸€ä»¶äº‹æ˜¯å°†æˆ‘ä»¬ç¼–è¯‘å¥½çš„ <code>App</code> å¯¼å…¥åˆ° <code>index.js</code> ä¸­ï¼š</p>
            <pre><code class="language-ocaml">import <span class="token punctuation">{</span> AppRegistry <span class="token punctuation">}</span> from <span class="token type variable">'react</span><span class="token operator">-</span>native'<span class="token punctuation">;</span>
import <span class="token punctuation">{</span> app <span class="token punctuation">}</span> from <span class="token type variable">'</span><span class="token punctuation">.</span><span class="token operator">/</span>src<span class="token operator">/</span>App'<span class="token punctuation">;</span>

<span class="token operator">/*</span>
 å¦‚æœ <span class="token string">"in-source"</span> é€‰é¡¹ä¸º <span class="token boolean">false</span> <span class="token punctuation">(</span>é»˜è®¤ä¸º <span class="token boolean">false</span> <span class="token punctuation">)</span>ï¼Œæ‚¨å°†ä»¥è¿™ç§æ–¹å¼å¯¼å…¥app<span class="token punctuation">:</span>
 import <span class="token punctuation">{</span> app <span class="token punctuation">}</span> from <span class="token string">"./lib/js/src/App.js"</span><span class="token punctuation">;</span>
<span class="token operator">*/</span>

AppRegistry<span class="token punctuation">.</span>registerComponent<span class="token punctuation">(</span><span class="token type variable">'MyReasonApp</span><span class="token type variable">'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> app<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
            <p>æœ€åï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿è¡Œæ¥ç¼–è¯‘ä»£ç :</p>
            <pre><code class="language-ocaml">npm run watch
</code></pre>
            <p>è¿™å°†ç›‘è§†æ‚¨å¯¹ Reason ä»£ç æ‰€åšçš„ä»»ä½•æ›´æ”¹å¹¶è¿›è¡Œç¼–è¯‘ï¼ˆå¦‚æœæ²¡æœ‰é”™è¯¯çš„è¯ï¼‰ã€‚</p>
            <p>ç°åœ¨è®©æˆ‘ä»¬å¼€å§‹è¿è¡Œ React Native åº”ç”¨ç¨‹åºï¼š</p>
            <pre><code class="language-ocaml">react<span class="token operator">-</span>native run<span class="token operator">-</span>ios
</code></pre>
            <p>ä½ åº”è¯¥çœ‹åˆ°ï¼š</p>
            <p><img src="/images/1_tsDhHE5u-a4v8Url4lXlUw.png" alt="1_tsDhHE5u-a4v8Url4lXlUw.png"></p>
            <p>å¿«ä¹ hacking ! ğŸ‰</p>
            <p>è¿™é‡Œæ˜¯ä¸ä¸Šè¿°è®¾ç½®çš„ repo é“¾æ¥ï¼š</p>
            <p><a href="https://github.com/knowbody/ReasonReactNativeApp">https://github.com/knowbody/ReasonReactNativeApp</a></p>
            <p>â€¦</p>
            <p><a href="https://twitter.com/matzatorski">åœ¨ Twitter ä¸Šå…³æ³¨ Mateusz Zatorski</a></p>

          </div>
        </div>
      </div>
    </div>
  </body>

</html>